<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªé˜³ç³»3Då¯è§†åŒ–</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0e1a;
            overflow: hidden;
        }
        #canvas-container {
            width: 100vw;
            height: 100vh;
        }

        /* æ ‡é¢˜ */
        .title {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 100;
        }
        .title h1 {
            font-size: 48px;
            font-weight: bold;
            background: linear-gradient(to right, #06b6d4, #6366f1, #ff006e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(6, 182, 212, 0.5);
        }
        .title p {
            color: #9ca3af;
            margin-top: 8px;
            font-size: 14px;
        }

        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            position: fixed;
            left: 20px;
            bottom: 20px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(6, 182, 212, 0.3);
            border-radius: 16px;
            padding: 24px;
            color: white;
            z-index: 100;
            min-width: 200px;
        }
        .control-panel h3 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 16px;
            color: #06b6d4;
        }
        .control-panel button {
            width: 100%;
            padding: 12px 20px;
            background: linear-gradient(to right, #06b6d4, #6366f1);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 12px;
            transition: opacity 0.2s;
        }
        .control-panel button:hover {
            opacity: 0.9;
        }
        .control-panel .slider-container {
            margin-bottom: 12px;
        }
        .control-panel .slider-container label {
            display: block;
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 6px;
        }
        .control-panel .slider-container input {
            width: 100%;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }
        .control-panel .slider-container input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #06b6d4;
            border-radius: 50%;
            cursor: pointer;
        }
        .control-panel .toggle-btn {
            background: #374151;
            padding: 8px 12px;
            font-size: 14px;
        }
        .control-panel .toggle-btn.active {
            background: #06b6d4;
            color: #000;
        }
        .control-panel .tips {
            margin-top: 16px;
            padding-top: 12px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 11px;
            color: #6b7280;
            line-height: 1.6;
        }

        /* è¡Œæ˜Ÿä¿¡æ¯é¢æ¿ */
        .info-panel {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 360px;
            max-height: 70vh;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 24px;
            padding: 32px;
            color: white;
            z-index: 100;
            display: none;
        }
        .info-panel.show {
            display: block;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-50%) translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateY(-50%) translateX(0);
            }
        }
        .info-panel .close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.2s;
        }
        .info-panel .close-btn:hover {
            background: rgba(255,255,255,0.1);
        }
        .info-panel h2 {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 4px;
            background: linear-gradient(to right, #06b6d4, #6366f1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .info-panel .subtitle {
            color: #06b6d4;
            margin-bottom: 20px;
        }
        .info-panel .description {
            color: #d1d5db;
            line-height: 1.7;
            margin-bottom: 24px;
        }
        .info-panel .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .info-panel .info-item .label {
            color: #9ca3af;
        }
        .info-panel .info-item .value {
            font-weight: 600;
        }

        /* æ»šåŠ¨æ¡ */
        .info-panel::-webkit-scrollbar {
            width: 6px;
        }
        .info-panel::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
            border-radius: 3px;
        }
        .info-panel::-webkit-scrollbar-thumb {
            background: rgba(99, 102, 241, 0.5);
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <!-- æ ‡é¢˜ -->
    <div class="title">
        <h1>å¤ªé˜³ç³»3Då¯è§†åŒ–</h1>
        <p>æ¢ç´¢å®‡å®™çš„å¥¥ç§˜</p>
    </div>

    <!-- 3Dç”»å¸ƒå®¹å™¨ -->
    <div id="canvas-container"></div>

    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <h3>æ§åˆ¶é¢æ¿</h3>
        <button id="play-pause-btn">â¸ æš‚åœ</button>
        <div class="slider-container">
            <label>åŠ¨ç”»é€Ÿåº¦: <span id="speed-value">1.0</span>x</label>
            <input type="range" id="speed-slider" min="0.1" max="5" step="0.1" value="1">
        </div>
        <button class="toggle-btn active" id="orbit-toggle">âœ“ æ˜¾ç¤ºè½¨é“</button>
        <div class="tips">
            ğŸ–±ï¸ æ‹–æ‹½ï¼šæ—‹è½¬è§†è§’<br>
            ğŸ” æ»šè½®ï¼šç¼©æ”¾<br>
            ğŸ‘† ç‚¹å‡»è¡Œæ˜Ÿï¼šæŸ¥çœ‹è¯¦æƒ…
        </div>
    </div>

    <!-- è¡Œæ˜Ÿä¿¡æ¯é¢æ¿ -->
    <div class="info-panel" id="info-panel">
        <button class="close-btn" id="close-info">Ã—</button>
        <h2 id="planet-name"></h2>
        <p class="subtitle" id="planet-name-en"></p>
        <p class="description" id="planet-description"></p>
        <div id="planet-details"></div>
    </div>

    <!-- Three.js -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.164.1/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.164.1/examples/jsm/"
        }
    }
    </script>

    <script type="module">
        import * as THREE from 'three'
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js'

        // è¡Œæ˜Ÿæ•°æ®
        const planetsData = [
            {
                name: 'æ°´æ˜Ÿ',
                nameEn: 'Mercury',
                diameter: 0.8,
                distanceFromSun: 15,
                orbitalPeriod: 0.24,
                color: 0x8c8c8c,
                info: {
                    description: 'å¤ªé˜³ç³»æœ€å°çš„è¡Œæ˜Ÿï¼Œä¹Ÿæ˜¯æœ€æ¥è¿‘å¤ªé˜³çš„è¡Œæ˜Ÿã€‚è¡¨é¢å¸ƒæ»¡é™¨çŸ³å‘ï¼Œçœ‹èµ·æ¥å¾ˆåƒæœˆçƒã€‚',
                    diameterKm: '4,879 km',
                    mass: '3.285 Ã— 10Â²Â³ kg',
                    gravity: '3.7 m/sÂ²',
                    temperature: '-180Â°C è‡³ 430Â°C'
                }
            },
            {
                name: 'é‡‘æ˜Ÿ',
                nameEn: 'Venus',
                diameter: 1.2,
                distanceFromSun: 22,
                orbitalPeriod: 0.62,
                color: 0xffc649,
                info: {
                    description: 'å¤ªé˜³ç³»ä¸­æœ€çƒ­çš„è¡Œæ˜Ÿï¼Œæ‹¥æœ‰æµ“åšçš„äºŒæ°§åŒ–ç¢³å¤§æ°”å±‚ã€‚',
                    diameterKm: '12,104 km',
                    mass: '4.867 Ã— 10Â²â´ kg',
                    gravity: '8.87 m/sÂ²',
                    temperature: '462Â°C å¹³å‡'
                }
            },
            {
                name: 'åœ°çƒ',
                nameEn: 'Earth',
                diameter: 1.3,
                distanceFromSun: 30,
                orbitalPeriod: 1,
                color: 0x4a90e2,
                info: {
                    description: 'æˆ‘ä»¬çš„å®¶å›­ï¼Œç›®å‰å·²çŸ¥å”¯ä¸€å­˜åœ¨ç”Ÿå‘½çš„æ˜Ÿçƒã€‚',
                    diameterKm: '12,742 km',
                    mass: '5.972 Ã— 10Â²â´ kg',
                    gravity: '9.8 m/sÂ²',
                    temperature: '15Â°C å¹³å‡'
                }
            },
            {
                name: 'ç«æ˜Ÿ',
                nameEn: 'Mars',
                diameter: 1.0,
                distanceFromSun: 40,
                orbitalPeriod: 1.88,
                color: 0xe27b58,
                info: {
                    description: 'è¢«ç§°ä¸º"çº¢è‰²æ˜Ÿçƒ"ï¼Œè¡¨é¢è¦†ç›–ç€æ°§åŒ–é“ã€‚',
                    diameterKm: '6,779 km',
                    mass: '6.39 Ã— 10Â²Â³ kg',
                    gravity: '3.71 m/sÂ²',
                    temperature: '-63Â°C å¹³å‡'
                }
            },
            {
                name: 'æœ¨æ˜Ÿ',
                nameEn: 'Jupiter',
                diameter: 3.5,
                distanceFromSun: 55,
                orbitalPeriod: 11.86,
                color: 0xd4a373,
                info: {
                    description: 'å¤ªé˜³ç³»æœ€å¤§çš„è¡Œæ˜Ÿï¼Œä¸€é¢—å·¨å¤§çš„æ°”æ€å·¨è¡Œæ˜Ÿã€‚',
                    diameterKm: '139,820 km',
                    mass: '1.898 Ã— 10Â²â· kg',
                    gravity: '24.79 m/sÂ²',
                    temperature: '-108Â°C å¹³å‡'
                }
            },
            {
                name: 'åœŸæ˜Ÿ',
                nameEn: 'Saturn',
                diameter: 3.0,
                distanceFromSun: 75,
                orbitalPeriod: 29.46,
                color: 0xf4e4bc,
                info: {
                    description: 'ä»¥å…¶å£®è§‚çš„ç¯ç³»ç»Ÿè€Œé—»åã€‚',
                    diameterKm: '116,460 km',
                    mass: '5.683 Ã— 10Â²â¶ kg',
                    gravity: '10.44 m/sÂ²',
                    temperature: '-139Â°C å¹³å‡'
                }
            },
            {
                name: 'å¤©ç‹æ˜Ÿ',
                nameEn: 'Uranus',
                diameter: 2.0,
                distanceFromSun: 95,
                orbitalPeriod: 84.01,
                color: 0x4fd0e7,
                info: {
                    description: 'ä¸€é¢—å†°å·¨æ˜Ÿï¼Œå¤§æ°”ä¸­å«æœ‰ç”²çƒ·ä½¿å…¶å‘ˆç°è“ç»¿è‰²ã€‚',
                    diameterKm: '50,724 km',
                    mass: '8.681 Ã— 10Â²âµ kg',
                    gravity: '8.69 m/sÂ²',
                    temperature: '-197Â°C å¹³å‡'
                }
            },
            {
                name: 'æµ·ç‹æ˜Ÿ',
                nameEn: 'Neptune',
                diameter: 1.9,
                distanceFromSun: 115,
                orbitalPeriod: 164.8,
                color: 0x4166f5,
                info: {
                    description: 'å¤ªé˜³ç³»æœ€å¤–å±‚çš„è¡Œæ˜Ÿï¼Œä¸€é¢—æ·±è“è‰²çš„å†°å·¨æ˜Ÿã€‚',
                    diameterKm: '49,244 km',
                    mass: '1.024 Ã— 10Â²â¶ kg',
                    gravity: '11.15 m/sÂ²',
                    temperature: '-201Â°C å¹³å‡'
                }
            }
        ]

        // å…¨å±€å˜é‡
        let scene, camera, renderer, controls
        let planets = []
        let orbits = []
        let isPaused = false
        let speedMultiplier = 1
        let showOrbits = true

        // åˆå§‹åŒ–åœºæ™¯
        function init() {
            // åˆ›å»ºåœºæ™¯
            scene = new THREE.Scene()

            // åˆ›å»ºç›¸æœº
            camera = new THREE.PerspectiveCamera(
                60,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            )
            camera.position.set(60, 50, 100)

            // åˆ›å»ºæ¸²æŸ“å™¨
            renderer = new THREE.WebGLRenderer({ antialias: true })
            renderer.setSize(window.innerWidth, window.innerHeight)
            renderer.setPixelRatio(window.devicePixelRatio)
            document.getElementById('canvas-container').appendChild(renderer.domElement)

            // æ§åˆ¶å™¨
            controls = new OrbitControls(camera, renderer.domElement)
            controls.enableDamping = true
            controls.dampingFactor = 0.05
            controls.minDistance = 30
            controls.maxDistance = 300

            // ç¯å¢ƒå…‰
            const ambientLight = new THREE.AmbientLight(0x333333, 0.5)
            scene.add(ambientLight)

            // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
            createStarBackground()

            // åˆ›å»ºå¤ªé˜³
            createSun()

            // åˆ›å»ºè¡Œæ˜Ÿ
            planetsData.forEach((data, index) => {
                createPlanet(data, index)
            })

            // ç‚¹å‡»æ£€æµ‹
            renderer.domElement.addEventListener('click', onCanvasClick)

            // çª—å£å¤§å°è°ƒæ•´
            window.addEventListener('resize', onWindowResize)

            // å¼€å§‹åŠ¨ç”»
            animate()
        }

        // åˆ›å»ºæ˜Ÿç©ºèƒŒæ™¯
        function createStarBackground() {
            const starGeometry = new THREE.BufferGeometry()
            const starCount = 10000
            const positions = new Float32Array(starCount * 3)
            const colors = new Float32Array(starCount * 3)

            for (let i = 0; i < starCount; i++) {
                const radius = 400 + Math.random() * 600
                const theta = Math.random() * Math.PI * 2
                const phi = Math.acos(2 * Math.random() - 1)

                positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta)
                positions[i * 3 + 1] = radius * Math.sin(phi) * Math.sin(theta)
                positions[i * 3 + 2] = radius * Math.cos(phi)

                // éšæœºé¢œè‰²
                const colorChoice = Math.random()
                if (colorChoice > 0.9) {
                    colors[i * 3] = 0.7
                    colors[i * 3 + 1] = 0.8
                    colors[i * 3 + 2] = 1.0
                } else if (colorChoice > 0.7) {
                    colors[i * 3] = 1.0
                    colors[i * 3 + 1] = 0.9
                    colors[i * 3 + 2] = 0.7
                } else {
                    colors[i * 3] = 1.0
                    colors[i * 3 + 1] = 1.0
                    colors[i * 3 + 2] = 1.0
                }
            }

            starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3))
            starGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3))

            const starMaterial = new THREE.PointsMaterial({
                size: 1.5,
                vertexColors: true,
                transparent: true,
                opacity: 0.8
            })

            const stars = new THREE.Points(starGeometry, starMaterial)
            scene.add(stars)
        }

        // åˆ›å»ºå¤ªé˜³
        function createSun() {
            const sunGeometry = new THREE.SphereGeometry(5, 32, 32)
            const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffdd00 })
            const sun = new THREE.Mesh(sunGeometry, sunMaterial)
            scene.add(sun)

            // å¤ªé˜³å…‰
            const sunLight = new THREE.PointLight(0xffdd44, 2, 500)
            scene.add(sunLight)
        }

        // åˆ›å»ºè¡Œæ˜Ÿ
        function createPlanet(data, index) {
            // è½¨é“ç»„
            const orbitGroup = new THREE.Group()
            scene.add(orbitGroup)

            // è½¨é“çº¿
            const orbitPoints = []
            for (let i = 0; i <= 64; i++) {
                const angle = (i / 64) * Math.PI * 2
                orbitPoints.push(
                    new THREE.Vector3(
                        Math.cos(angle) * data.distanceFromSun,
                        0,
                        Math.sin(angle) * data.distanceFromSun
                    )
                )
            }
            const orbitGeometry = new THREE.BufferGeometry().setFromPoints(orbitPoints)
            const orbitMaterial = new THREE.LineBasicMaterial({
                color: 0x444466,
                transparent: true,
                opacity: 0.3
            })
            const orbitLine = new THREE.Line(orbitGeometry, orbitMaterial)
            scene.add(orbitLine)
            orbits.push(orbitLine)

            // è¡Œæ˜Ÿ
            const planetGeometry = new THREE.SphereGeometry(data.diameter, 32, 32)
            const planetMaterial = new THREE.MeshStandardMaterial({
                color: data.color,
                roughness: 0.8,
                metalness: 0.2
            })
            const planet = new THREE.Mesh(planetGeometry, planetMaterial)
            planet.position.set(data.distanceFromSun, 0, 0)
            planet.userData = { ...data, index }
            orbitGroup.add(planet)

            planets.push({
                mesh: planet,
                orbit: orbitGroup,
                orbitLine: orbitLine,
                data: data
            })
        }

        // åŠ¨ç”»å¾ªç¯
        function animate() {
            requestAnimationFrame(animate)

            if (!isPaused) {
                const time = Date.now() * 0.0001

                planets.forEach((planet, i) => {
                    // å…¬è½¬
                    const orbitSpeed = 1 / planet.data.orbitalPeriod
                    planet.orbit.rotation.y = time * orbitSpeed * speedMultiplier

                    // è‡ªè½¬
                    planet.mesh.rotation.y += 0.01 * speedMultiplier
                })
            }

            controls.update()
            renderer.render(scene, camera)
        }

        // ç‚¹å‡»æ£€æµ‹
        function onCanvasClick(event) {
            const mouse = new THREE.Vector2()
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1

            const raycaster = new THREE.Raycaster()
            raycaster.setFromCamera(mouse, camera)

            const planetMeshes = planets.map(p => p.mesh)
            const intersects = raycaster.intersectObjects(planetMeshes)

            if (intersects.length > 0) {
                const clickedPlanet = intersects[0].object.userData
                showPlanetInfo(clickedPlanet)
            } else {
                hidePlanetInfo()
            }
        }

        // æ˜¾ç¤ºè¡Œæ˜Ÿä¿¡æ¯
        function showPlanetInfo(data) {
            const panel = document.getElementById('info-panel')
            document.getElementById('planet-name').textContent = data.name
            document.getElementById('planet-name-en').textContent = data.nameEn
            document.getElementById('planet-description').textContent = data.info.description

            const details = document.getElementById('planet-details')
            details.innerHTML = `
                <div class="info-item">
                    <span class="label">ç›´å¾„</span>
                    <span class="value">${data.info.diameterKm}</span>
                </div>
                <div class="info-item">
                    <span class="label">è´¨é‡</span>
                    <span class="value">${data.info.mass}</span>
                </div>
                <div class="info-item">
                    <span class="label">é‡åŠ›</span>
                    <span class="value">${data.info.gravity}</span>
                </div>
                <div class="info-item">
                    <span class="label">æ¸©åº¦</span>
                    <span class="value">${data.info.temperature}</span>
                </div>
                <div class="info-item">
                    <span class="label">å…¬è½¬å‘¨æœŸ</span>
                    <span class="value">${data.orbitalPeriod} åœ°çƒå¹´</span>
                </div>
            `

            panel.classList.add('show')
        }

        // éšè—è¡Œæ˜Ÿä¿¡æ¯
        function hidePlanetInfo() {
            const panel = document.getElementById('info-panel')
            panel.classList.remove('show')
        }

        // çª—å£å¤§å°è°ƒæ•´
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight
            camera.updateProjectionMatrix()
            renderer.setSize(window.innerWidth, window.innerHeight)
        }

        // æ§åˆ¶é¢æ¿äº‹ä»¶
        document.getElementById('play-pause-btn').addEventListener('click', function() {
            isPaused = !isPaused
            this.textContent = isPaused ? 'â–¶ ç»§ç»­' : 'â¸ æš‚åœ'
        })

        document.getElementById('speed-slider').addEventListener('input', function() {
            speedMultiplier = parseFloat(this.value)
            document.getElementById('speed-value').textContent = speedMultiplier.toFixed(1)
        })

        document.getElementById('orbit-toggle').addEventListener('click', function() {
            showOrbits = !showOrbits
            this.textContent = showOrbits ? 'âœ“ æ˜¾ç¤ºè½¨é“' : 'âœ— éšè—è½¨é“'
            this.classList.toggle('active', showOrbits)
            orbits.forEach(orbit => orbit.visible = showOrbits)
        })

        document.getElementById('close-info').addEventListener('click', hidePlanetInfo)

        // åˆå§‹åŒ–
        init()
    </script>
</body>
</html>
