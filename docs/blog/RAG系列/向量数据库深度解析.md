# å‘é‡æ•°æ®åº“æ·±åº¦è§£æï¼šRAGç³»ç»Ÿçš„æ ¸å¿ƒå¼•æ“

> ä½œè€…ï¼šç ä¸Šäº‘å¼€å·¥
> è§†é¢‘è®²è§£ï¼šçŸ­è§†é¢‘å¹³å°è´¦å·ã€Œæ¶æ„ç‹®ä¸æ©˜ã€
> é˜…è¯»æ—¶é—´ï¼šçº¦20åˆ†é’Ÿ
> éš¾åº¦çº§åˆ«ï¼šâ­â­â­â­

## ç›®å½•

- [ä¸€ã€ä»€ä¹ˆæ˜¯å‘é‡](#ä¸€ä»€ä¹ˆæ˜¯å‘é‡)
- [äºŒã€åµŒå…¥æ¨¡å‹æ¼”è¿›å²](#äºŒåµŒå…¥æ¨¡å‹æ¼”è¿›å²)
- [ä¸‰ã€ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•](#ä¸‰ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•)
- [å››ã€å‘é‡æ•°æ®åº“vsä¼ ç»Ÿæ•°æ®åº“](#å››å‘é‡æ•°æ®åº“vsä¼ ç»Ÿæ•°æ®åº“)
- [äº”ã€ANNç®—æ³•æ·±åº¦è§£æ](#äº”annç®—æ³•æ·±åº¦è§£æ)
- [å…­ã€ä¸»æµå‘é‡æ•°æ®åº“å¯¹æ¯”](#å…­ä¸»æµå‘é‡æ•°æ®åº“å¯¹æ¯”)
- [ä¸ƒã€å®æˆ˜éƒ¨ç½²æŒ‡å—](#ä¸ƒå®æˆ˜éƒ¨ç½²æŒ‡å—)
- [å…«ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#å…«æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
- [ä¹ã€æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ](#ä¹æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ)
- [åã€æœªæ¥å‘å±•è¶‹åŠ¿](#åæœªæ¥å‘å±•è¶‹åŠ¿)
- [åä¸€ã€æ€»ç»“](#åä¸€æ€»ç»“)

---

## ä¸€ã€ä»€ä¹ˆæ˜¯å‘é‡

### 1.1 æ•°å­¦å®šä¹‰

åœ¨æ•°å­¦ä¸­ï¼Œ**å‘é‡ï¼ˆVectorï¼‰**æ˜¯ä¸€ä¸ª**æœ‰åºçš„æ•°å­—åˆ—è¡¨**ï¼Œä¹Ÿç§°ä¸º**æ•°ç»„**æˆ–**å¼ é‡**ã€‚

```python
# ä¸åŒç»´åº¦çš„å‘é‡
ä¸€ç»´å‘é‡: [5]  # æ ‡é‡
äºŒç»´å‘é‡: [3, 4]
ä¸‰ç»´å‘é‡: [1, 2, 3]
é«˜ç»´å‘é‡: [0.23, -0.56, 0.78, ..., 0.12]  # 1536ç»´
```

### 1.2 AIä¸­çš„å‘é‡

åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œ**å‘é‡æ˜¯ä¿¡æ¯çš„æ•°å­¦è¡¨ç¤º**ã€‚AIé€šè¿‡åµŒå…¥æ¨¡å‹ï¼ˆEmbedding Modelï¼‰å°†å„ç§ä¿¡æ¯ï¼ˆæ–‡å­—ã€å›¾åƒã€éŸ³é¢‘ï¼‰è½¬åŒ–ä¸ºå‘é‡ï¼Œä»è€Œè®©è®¡ç®—æœºèƒ½å¤Ÿç†è§£å’Œè®¡ç®—è¯­ä¹‰ã€‚

**æ ¸å¿ƒæ´å¯Ÿï¼š**

```
è¯­ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬ â†’ åœ¨å‘é‡ç©ºé—´ä¸­è·ç¦»æ›´è¿‘
è¯­ä¹‰ä¸åŒçš„æ–‡æœ¬ â†’ åœ¨å‘é‡ç©ºé—´ä¸­è·ç¦»æ›´è¿œ
```

**ç¤ºä¾‹ï¼š**

```
"è‹¹æœ"    â†’ [0.23, -0.56, 0.78, ..., 0.12]
"æ°´æœ"    â†’ [0.25, -0.54, 0.76, ..., 0.15]
"æ±½è½¦"    â†’ [0.67, 0.23, -0.45, ..., 0.89]

è®¡ç®—è·ç¦»ï¼š
|è‹¹æœ - æ°´æœ| = 0.08  â† å¾ˆè¿‘ï¼ˆè¯­ä¹‰ç›¸ä¼¼ï¼‰
|è‹¹æœ - æ±½è½¦| = 0.72  â† å¾ˆè¿œï¼ˆè¯­ä¹‰ä¸åŒï¼‰
```

### 1.3 å‘é‡çš„ç»´åº¦

å‘é‡çš„ç»´åº¦å†³å®šäº†å®ƒèƒ½è¡¨è¾¾å¤šå°‘ä¿¡æ¯ï¼š

| ç»´åº¦ | è¯´æ˜ | åº”ç”¨åœºæ™¯ |
|------|------|---------|
| **50-300ç»´** | æ—©æœŸè¯å‘é‡ | Word2Vecã€GloVe |
| **768ç»´** | BERTåŸºç¡€ | BERT-baseã€RoBERTa |
| **1024ç»´** | BERTå¤§å‹ | BERT-largeã€BGE |
| **1536ç»´** | OpenAIæœ€æ–° | OpenAI Embedding-3 |
| **3072ç»´** | è¶…é«˜ç²¾åº¦ | OpenAI Embedding-3-large |

**ç»éªŒæ³•åˆ™ï¼š**
- ç»´åº¦è¶Šé«˜ â†’ è¡¨è¾¾èƒ½åŠ›è¶Šå¼º â†’ ä½†è®¡ç®—å’Œå­˜å‚¨æˆæœ¬ä¹Ÿè¶Šé«˜
- ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œéœ€è¦æƒè¡¡æ€§èƒ½å’Œæˆæœ¬

---

## äºŒã€åµŒå…¥æ¨¡å‹æ¼”è¿›å²

åµŒå…¥æ¨¡å‹æ˜¯å‘é‡ç”Ÿæˆçš„æ ¸å¿ƒï¼Œç»å†äº†ä»é™æ€åˆ°åŠ¨æ€ã€ä»æµ…å±‚åˆ°æ·±å±‚çš„æ¼”è¿›ã€‚

### 2.1 æ—¶ä»£åˆ’åˆ†

```mermaid
graph LR
    A[2013: Word2Vec] --> B[2014: GloVe]
    B --> C[2018: BERT]
    C --> D[2021: å¯¹æ¯”å­¦ä¹ ]
    D --> E[2023: å¼€æºå´›èµ·]
    E --> F[2024: è¶…å¤§è§„æ¨¡]
```

### 2.2 ç¬¬ä¸€ä»£ï¼šé™æ€è¯å‘é‡ï¼ˆ2013-2017ï¼‰

#### Word2Vecï¼ˆ2013ï¼‰

**æ ¸å¿ƒæ€æƒ³ï¼š** é€šè¿‡ä¸Šä¸‹æ–‡å­¦ä¹ è¯çš„å‘é‡è¡¨ç¤º

**è®­ç»ƒæ–¹å¼ï¼š**
- **CBOWï¼ˆContinuous Bag-of-Wordsï¼‰**ï¼šæ ¹æ®ä¸Šä¸‹æ–‡é¢„æµ‹ä¸­å¿ƒè¯
- **Skip-gram**ï¼šæ ¹æ®ä¸­å¿ƒè¯é¢„æµ‹ä¸Šä¸‹æ–‡

**çªç ´æ€§å‘ç°ï¼š** å‘é‡è¿ç®—æˆç«‹ï¼

```python
# ç»å…¸ç¤ºä¾‹
king - man + woman â‰ˆ queen
paris - france + china â‰ˆ beijing
```

**ç‰¹ç‚¹ï¼š**
- ç»´åº¦ï¼š300
- ä¼˜ç‚¹ï¼šè®­ç»ƒå¿«ï¼Œæ•ˆæœå¥½
- ç¼ºç‚¹ï¼šä¸€è¯ä¸€ä¹‰ï¼Œæ— æ³•å¤„ç†å¤šä¹‰è¯

#### GloVeï¼ˆ2014ï¼‰

**æ ¸å¿ƒæ€æƒ³ï¼š** ç»“åˆå…¨å±€ç»Ÿè®¡ä¿¡æ¯å’Œå±€éƒ¨ä¸Šä¸‹æ–‡

**ç‰¹ç‚¹ï¼š**
- ç»´åº¦ï¼š50/100/200/300
- ä¼˜ç‚¹ï¼šåœ¨è¯ç±»æ¯”ä»»åŠ¡ä¸Šè¡¨ç°ä¼˜å¼‚
- å½±å“ï¼šæˆä¸ºè®¸å¤šNLPä»»åŠ¡çš„åŸºç¡€

### 2.3 ç¬¬äºŒä»£ï¼šä¸Šä¸‹æ–‡åŠ¨æ€è¯å‘é‡ï¼ˆ2018-2020ï¼‰

#### BERTï¼ˆ2018ï¼‰

**é©å‘½æ€§çªç ´ï¼š** åŒä¸€ä¸ªè¯åœ¨ä¸åŒè¯­å¢ƒä¸‹æœ‰ä¸åŒå‘é‡è¡¨ç¤ºï¼

**ç¤ºä¾‹ï¼š**

```
å¥å­1: "æˆ‘åƒäº†ä¸€ä¸ªè‹¹æœ" â†’ è‹¹æœ = [0.23, -0.56, ...]  (æ°´æœ)
å¥å­2: "æˆ‘ä¹°äº†ä¸€éƒ¨è‹¹æœ" â†’ è‹¹æœ = [0.45, 0.12, ...]   (å“ç‰Œ)
```

**æŠ€æœ¯ç‰¹ç‚¹ï¼š**
- åŒå‘ä¸Šä¸‹æ–‡ç†è§£
- åŠ¨æ€è¯å‘é‡
- ç»´åº¦ï¼š768ï¼ˆbaseï¼‰æˆ–1024ï¼ˆlargeï¼‰

**å½±å“ï¼š** å¼€å¯äº†é¢„è®­ç»ƒ+å¾®è°ƒçš„æ–°èŒƒå¼

#### GPTç³»åˆ—ï¼ˆ2018-2020ï¼‰

**æ ¸å¿ƒæ€æƒ³ï¼š** è‡ªå›å½’è¯­è¨€æ¨¡å‹ï¼Œä»å·¦åˆ°å³é¢„æµ‹

**æ¼”è¿›ï¼š**
- GPT-1ï¼ˆ2018ï¼‰ï¼š1.17äº¿å‚æ•°
- GPT-2ï¼ˆ2019ï¼‰ï¼š15äº¿å‚æ•°
- GPT-3ï¼ˆ2020ï¼‰ï¼š1750äº¿å‚æ•°

### 2.4 ç¬¬ä¸‰ä»£ï¼šå¯¹æ¯”å­¦ä¹ æ—¶ä»£ï¼ˆ2021-2022ï¼‰

#### CLIPï¼ˆ2021ï¼‰

**çªç ´ï¼š** å›¾æ–‡è”åˆåµŒå…¥ï¼Œæ”¯æŒè·¨æ¨¡æ€æ£€ç´¢

**åŸç†ï¼š** å¯¹æ¯”å­¦ä¹ è®©å›¾æ–‡å¯¹åœ¨å‘é‡ç©ºé—´é è¿‘

#### SimCSEã€E5ï¼ˆ2021-2022ï¼‰

**åˆ›æ–°ï¼š** ä¸“é—¨ä¼˜åŒ–çš„å¥å­åµŒå…¥æ¨¡å‹

**ç‰¹ç‚¹ï¼š**
- å¯¹æ¯”å­¦ä¹ è®­ç»ƒ
- å¥å­çº§åˆ«è¯­ä¹‰ç†è§£
- åœ¨è¯­ä¹‰ç›¸ä¼¼åº¦ä»»åŠ¡ä¸Šè¡¨ç°ä¼˜å¼‚

### 2.5 ç¬¬å››ä»£ï¼šå¼€æºå´›èµ·ï¼ˆ2023ï¼‰

#### BGEï¼ˆBAAI General Embeddingï¼‰

**èƒŒæ™¯ï¼š** åŒ—äº¬æ™ºæºäººå·¥æ™ºèƒ½ç ”ç©¶é™¢å‘å¸ƒ

**ç‰ˆæœ¬ï¼š**
- BGE-smallï¼š768ç»´
- BGE-baseï¼š1024ç»´
- BGE-largeï¼š1024ç»´

**ç‰¹ç‚¹ï¼š**
- ä¸­æ–‡å¼€æºæœ€å¼º
- åœ¨MTEBè¯„æµ‹ä¸­è¶…è¶Šå•†ä¸šæ¨¡å‹
- æ”¯æŒä¸­è‹±åŒè¯­

**æ€§èƒ½å¯¹æ¯”ï¼ˆC-MTEBä¸­æ–‡è¯„æµ‹ï¼‰ï¼š**

| æ¨¡å‹ | å¹³å‡åˆ†æ•° | æ’å |
|------|---------|------|
| BGE-large-zh-v1.5 | **70.59** | ğŸ¥‡ |
| OpenAI Embedding-3 | 68.21 | ğŸ¥ˆ |
| BGE-base-zh-v1.5 | 67.83 | ğŸ¥‰ |
| m3e-large | 64.12 | 4 |

#### m3eï¼ˆmassive text embeddingï¼‰

**ç‰¹ç‚¹ï¼š**
- ä¸“é—¨é’ˆå¯¹ä¸­æ–‡ä¼˜åŒ–
- è½»é‡çº§è®¾è®¡
- é€‚åˆèµ„æºå—é™åœºæ™¯

### 2.6 ç¬¬äº”ä»£ï¼šè¶…å¤§è§„æ¨¡æ—¶ä»£ï¼ˆ2024+ï¼‰

#### OpenAI Embedding-3ï¼ˆ2024ï¼‰

**çªç ´ï¼š** æ”¯æŒå¯å˜ç»´åº¦å’Œæ›´é•¿ä¸Šä¸‹æ–‡

**ç‰ˆæœ¬ï¼š**
- text-embedding-3-smallï¼š1536ç»´
- text-embedding-3-largeï¼š3072ç»´

**ç‰¹ç‚¹ï¼š**
- å¤šè¯­è¨€æ”¯æŒï¼ˆ100+è¯­è¨€ï¼‰
- ä¸Šä¸‹æ–‡é•¿åº¦ï¼š8191 tokens
- æ€§èƒ½è¿œè¶…Embedding-2

**å®˜æ–¹å¯¹æ¯”ï¼ˆMTEBå¤šè¯­è¨€ï¼‰ï¼š**

| æ¨¡å‹ | å¹³å‡åˆ†æ•° |
|------|---------|
| Embedding-3-large | **70.4** |
| Embedding-3-small | 62.8 |
| Embedding-2ï¼ˆada-002ï¼‰ | 60.3 |

#### Cohere Embed v3ï¼ˆ2024ï¼‰

**ç‰¹ç‚¹ï¼š**
- æ”¯æŒ1024ç»´
- å¤šè¯­è¨€æ€§èƒ½ä¼˜å¼‚
- æä¾›RerankåŠŸèƒ½

### 2.7 åµŒå…¥æ¨¡å‹é€‰å‹æŒ‡å—

**å†³ç­–æ ‘ï¼š**

```
æ˜¯å¦éœ€è¦ä¸­æ–‡ä¸ºä¸»ï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ BGE-large-zh-v1.5ï¼ˆå¼€æºå…è´¹ï¼‰
â”‚
â””â”€â”€ å¦ â†’ é¢„ç®—å……è¶³ï¼Ÿ
    â”œâ”€â”€ æ˜¯ â†’ OpenAI Embedding-3-largeï¼ˆå•†ä¸šæœ€å¼ºï¼‰
    â”‚
    â””â”€â”€ å¦ â†’ éœ€è¦å¤šè¯­è¨€ï¼Ÿ
        â”œâ”€â”€ æ˜¯ â†’ Cohere Embed v3 / OpenAI Embedding-3-small
        â”‚
        â””â”€â”€ å¦ â†’ BGE-large-zhï¼ˆå¤šè¯­è¨€ä¹Ÿä¸é”™ï¼‰
```

**æ€§èƒ½vsæˆæœ¬å¯¹æ¯”è¡¨ï¼š**

| æ¨¡å‹ | ç»´åº¦ | ä¸­æ–‡æ”¯æŒ | æ€§èƒ½ | æˆæœ¬ï¼ˆæ¯ç™¾ä¸‡tokenï¼‰ |
|------|------|---------|------|-------------------|
| **BGE-large-zh** | 1024 | â­â­â­â­â­ | â­â­â­â­â­ | å…è´¹ï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰ |
| **m3e-large** | 1024 | â­â­â­â­â­ | â­â­â­â­ | å…è´¹ï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰ |
| **OpenAI Embedding-3-small** | 1536 | â­â­â­â­ | â­â­â­â­ | $0.02 |
| **OpenAI Embedding-3-large** | 3072 | â­â­â­â­ | â­â­â­â­â­ | $0.13 |
| **Cohere Embed v3** | 1024 | â­â­â­â­ | â­â­â­â­ | $0.10 |

---

## ä¸‰ã€ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•

### 3.1 æ ¸å¿ƒæ¦‚å¿µ

å‘é‡æ•°æ®åº“çš„é­”æ³•åœ¨äºï¼š**å‘é‡ä¹‹é—´çš„è·ç¦» = è¯­ä¹‰ç›¸ä¼¼åº¦**

```
è¯­ä¹‰ç›¸ä¼¼åº¦ = f(å‘é‡A, å‘é‡B)
```

### 3.2 ä¸‰ç§ä¸»æµæ–¹æ³•

#### æ–¹æ³•1ï¼šä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆCosine Similarityï¼‰

**å…¬å¼ï¼š**

```
cos(Î¸) = (A Â· B) / (|A| Ã— |B|)

å…¶ä¸­ï¼š
A Â· B = A1Ã—B1 + A2Ã—B2 + ... + AnÃ—Bn  ï¼ˆç‚¹ç§¯ï¼‰
|A| = âˆš(A1Â² + A2Â² + ... + AnÂ²)       ï¼ˆAçš„æ¨¡é•¿ï¼‰
|B| = âˆš(B1Â² + B2Â² + ... + BnÂ²)       ï¼ˆBçš„æ¨¡é•¿ï¼‰
```

**å‡ ä½•æ„ä¹‰ï¼š** ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’ä½™å¼¦å€¼

**å–å€¼èŒƒå›´ï¼š** [-1, 1]
- cos(Î¸) = 1ï¼šå®Œå…¨ç›¸åŒæ–¹å‘ï¼ˆæœ€ç›¸ä¼¼ï¼‰
- cos(Î¸) = 0ï¼šäº’ç›¸å‚ç›´ï¼ˆæ— å…³ï¼‰
- cos(Î¸) = -1ï¼šå®Œå…¨ç›¸åæ–¹å‘ï¼ˆæœ€ä¸ç›¸ä¼¼ï¼‰

**ä¸ºä»€ä¹ˆæœ€å¸¸ç”¨ï¼Ÿ**

å› ä¸ºä½™å¼¦ç›¸ä¼¼åº¦åªå…³æ³¨**æ–¹å‘**ï¼Œä¸å…³æ³¨**å¤§å°**ï¼ˆé•¿åº¦ï¼‰ã€‚

**ç¤ºä¾‹ï¼š**

```python
# çŸ­æ–‡æœ¬
text1 = "è‹¹æœ"
vector1 = [0.23, -0.56, 0.78]  # å‡è®¾3ç»´

# é•¿æ–‡æœ¬ï¼ˆè¯­ä¹‰ç›¸åŒï¼‰
text2 = "è‹¹æœæ˜¯ä¸€ç§éå¸¸å¥½åƒçš„çº¢è‰²æ°´æœ"
vector2 = [0.46, -1.12, 1.56]  # å¤§çº¦æ˜¯vector1çš„2å€

# è®¡ç®—
cosine_sim = cosine_similarity(vector1, vector2)
# ç»“æœ â‰ˆ 1.0  (æ–¹å‘ç›¸åŒ)

# æ¬§æ°è·ç¦»
euclidean_dist = euclidean_distance(vector1, vector2)
# ç»“æœè¾ƒå¤§ (å› ä¸ºé•¿åº¦ä¸åŒ)
```

**ç»“è®ºï¼š** ä½™å¼¦ç›¸ä¼¼åº¦æ›´é€‚åˆæ–‡æœ¬è¯­ä¹‰æ¯”è¾ƒï¼

#### æ–¹æ³•2ï¼šæ¬§æ°è·ç¦»ï¼ˆEuclidean Distanceï¼‰

**å…¬å¼ï¼š**

```
d = âˆš[(A1-B1)Â² + (A2-B2)Â² + ... + (An-Bn)Â²]
```

**å‡ ä½•æ„ä¹‰ï¼š** ä¸¤ä¸ªå‘é‡åœ¨ç©ºé—´ä¸­çš„ç›´çº¿è·ç¦»

**ç‰¹ç‚¹ï¼š**
- è€ƒè™‘å‘é‡çš„ç»å¯¹ä½ç½®
- å—å‘é‡é•¿åº¦å½±å“
- å–å€¼èŒƒå›´ï¼š[0, +âˆ)

**é€‚ç”¨åœºæ™¯ï¼š**
- å›¾åƒæ£€ç´¢ï¼ˆåƒç´ ç»å¯¹è·ç¦»é‡è¦ï¼‰
- å‘é‡å·²å½’ä¸€åŒ–çš„åœºæ™¯

#### æ–¹æ³•3ï¼šç‚¹ç§¯ï¼ˆDot Productï¼‰

**å…¬å¼ï¼š**

```
A Â· B = A1Ã—B1 + A2Ã—B2 + ... + AnÃ—Bn
```

**ç‰¹ç‚¹ï¼š**
- è®¡ç®—æœ€å¿«ï¼ˆæ— éœ€å¼€æ–¹ã€é™¤æ³•ï¼‰
- è¦æ±‚å‘é‡å·²å½’ä¸€åŒ–
- å½’ä¸€åŒ–åç­‰ä»·äºä½™å¼¦ç›¸ä¼¼åº¦

**é€‚ç”¨åœºæ™¯ï¼š**
- é«˜æ€§èƒ½éœ€æ±‚
- å‘é‡å·²ç»å½’ä¸€åŒ–

### 3.3 æ–¹æ³•å¯¹æ¯”

| æ–¹æ³• | ä¼˜ç‚¹ | ç¼ºç‚¹ | è®¡ç®—å¤æ‚åº¦ | æ¨èåœºæ™¯ |
|------|------|------|-----------|---------|
| **ä½™å¼¦ç›¸ä¼¼åº¦** | å…³æ³¨æ–¹å‘ï¼Œä¸å—é•¿åº¦å½±å“ | éœ€è¦è®¡ç®—æ¨¡é•¿ | O(n) | **æ–‡æœ¬æ£€ç´¢ï¼ˆæœ€æ¨èï¼‰** |
| **æ¬§æ°è·ç¦»** | ç›´è§‚ï¼Œå‡ ä½•æ„ä¹‰æ˜ç¡® | å—å‘é‡é•¿åº¦å½±å“ | O(n) | å›¾åƒæ£€ç´¢ |
| **ç‚¹ç§¯** | è®¡ç®—æœ€å¿« | éœ€è¦å½’ä¸€åŒ– | O(n) | é«˜æ€§èƒ½åœºæ™¯ |

### 3.4 å®é™…è®¡ç®—ç¤ºä¾‹

```python
import numpy as np

# ç¤ºä¾‹å‘é‡
A = np.array([1, 2, 3])
B = np.array([4, 5, 6])

# 1. ä½™å¼¦ç›¸ä¼¼åº¦
def cosine_similarity(A, B):
    dot_product = np.dot(A, B)
    norm_A = np.linalg.norm(A)
    norm_B = np.linalg.norm(B)
    return dot_product / (norm_A * norm_B)

cos_sim = cosine_similarity(A, B)
# ç»“æœï¼š0.9746

# 2. æ¬§æ°è·ç¦»
def euclidean_distance(A, B):
    return np.linalg.norm(A - B)

euc_dist = euclidean_distance(A, B)
# ç»“æœï¼š5.196

# 3. ç‚¹ç§¯
dot_prod = np.dot(A, B)
# ç»“æœï¼š32
```

### 3.5 ç›¸ä¼¼åº¦é˜ˆå€¼è®¾å®š

å®é™…åº”ç”¨ä¸­éœ€è¦è®¾å®šé˜ˆå€¼æ¥åˆ¤æ–­ç›¸å…³æ€§ï¼š

| ç›¸ä¼¼åº¦èŒƒå›´ | ç›¸å…³æ€§åˆ¤æ–­ | åº”ç”¨å»ºè®® |
|-----------|-----------|---------|
| **0.9 - 1.0** | é«˜åº¦ç›¸å…³ | ç›´æ¥ä½¿ç”¨ |
| **0.7 - 0.9** | æ¯”è¾ƒç›¸å…³ | å¯ä»¥ä½¿ç”¨ï¼Œå¯èƒ½éœ€è¦è¡¥å…… |
| **0.5 - 0.7** | å¼±ç›¸å…³ | è°¨æ…ä½¿ç”¨ï¼Œå»ºè®®Rerank |
| **< 0.5** | ä¸ç›¸å…³ | ä¸ä½¿ç”¨ |

**ç»éªŒå»ºè®®ï¼š**
- ç²¾ç¡®æœç´¢ï¼šé˜ˆå€¼ 0.85+
- æ¨¡ç³Šæœç´¢ï¼šé˜ˆå€¼ 0.70+
- è¯­ä¹‰æ¢ç´¢ï¼šé˜ˆå€¼ 0.50+

---

## å››ã€å‘é‡æ•°æ®åº“vsä¼ ç»Ÿæ•°æ®åº“

### 4.1 æ ¸å¿ƒåŒºåˆ«

| ç»´åº¦ | ä¼ ç»Ÿæ•°æ®åº“ï¼ˆMySQL/PostgreSQLï¼‰ | å‘é‡æ•°æ®åº“ï¼ˆMilvus/Pineconeï¼‰ |
|------|------------------------------|------------------------------|
| **æ•°æ®ç±»å‹** | ç»“æ„åŒ–æ•°æ®ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€æ—¥æœŸï¼‰ | é«˜ç»´å‘é‡ï¼ˆæµ®ç‚¹æ•°æ•°ç»„ï¼‰ |
| **æŸ¥è¯¢æ–¹å¼** | ç²¾ç¡®åŒ¹é…ï¼ˆWHERE id = 1ï¼‰ | ç›¸ä¼¼åº¦æœç´¢ï¼ˆæ‰¾æœ€ç›¸ä¼¼çš„Kä¸ªï¼‰ |
| **ç´¢å¼•æŠ€æœ¯** | B-Treeã€Hashè¡¨ | HNSWã€IVFã€PQç­‰ANNç®—æ³• |
| **æŸ¥è¯¢å¤æ‚åº¦** | O(log n) | O(log n) |
| **æ‰©å±•æ€§** | å‚ç›´æ‰©å±•ï¼ˆå‡çº§æœåŠ¡å™¨é…ç½®ï¼‰ | æ°´å¹³æ‰©å±•ï¼ˆå¢åŠ èŠ‚ç‚¹ï¼‰ |
| **ä¸€è‡´æ€§** | å¼ºä¸€è‡´æ€§ï¼ˆACIDï¼‰ | æœ€ç»ˆä¸€è‡´æ€§ |
| **å…¸å‹åº”ç”¨** | äº¤æ˜“ç³»ç»Ÿã€ç”¨æˆ·ä¿¡æ¯ç®¡ç† | æ¨èç³»ç»Ÿã€å›¾åƒæ£€ç´¢ã€RAG |
| **ä»£è¡¨äº§å“** | MySQLã€PostgreSQLã€Oracle | Milvusã€Pineconeã€Weaviate |

### 4.2 ä¸ºä»€ä¹ˆä¼ ç»Ÿæ•°æ®åº“ä¸é€‚åˆå‘é‡æœç´¢ï¼Ÿ

#### é—®é¢˜1ï¼šç»´åº¦ç¾éš¾

ä¼ ç»Ÿç´¢å¼•ï¼ˆå¦‚B-Treeï¼‰åœ¨é«˜ç»´ç©ºé—´ä¼šå¤±æ•ˆã€‚

**æ¼”ç¤ºï¼š**

```
ä¸€ç»´æ•°æ®ï¼ˆ100ä¸‡æ¡ï¼‰ï¼š
[0-100) â†’ [100-200) â†’ ... â†’ [999900-1000000)
10ä¸ªèŒƒå›´ï¼Œæ¯ä¸ª10ä¸‡æ¡ï¼ŒæŸ¥è¯¢å¿«é€Ÿ

äºŒç»´æ•°æ®ï¼ˆ100ä¸‡æ¡ï¼‰ï¼š
æ¯ä¸ªç»´åº¦10ä¸ªèŒƒå›´ â†’ 10Â² = 100ä¸ªæ¡¶
æ¯ä¸ªæ¡¶1ä¸‡æ¡ï¼ŒæŸ¥è¯¢è¿˜è¡Œ

1536ç»´æ•°æ®ï¼ˆ100ä¸‡æ¡ï¼‰ï¼š
æ¯ä¸ªç»´åº¦10ä¸ªèŒƒå›´ â†’ 10^1536 ä¸ªæ¡¶ï¼ï¼ï¼
```

**ç»“è®ºï¼š** ç»´åº¦çˆ†ç‚¸å¯¼è‡´ä¼ ç»Ÿç´¢å¼•æ— æ³•å·¥ä½œï¼

#### é—®é¢˜2ï¼šè·ç¦»è®¡ç®—å¤æ‚åº¦

å¯¹äº100ä¸‡ä¸ª1536ç»´å‘é‡ï¼š

```
æš´åŠ›æœç´¢ï¼š
- æ¯æ¬¡æŸ¥è¯¢éœ€è¦è®¡ç®—100ä¸‡æ¬¡ä½™å¼¦ç›¸ä¼¼åº¦
- æ¯æ¬¡è®¡ç®—éœ€è¦1536æ¬¡ä¹˜æ³•å’ŒåŠ æ³•
- æ€»è®¡ï¼š100ä¸‡ Ã— 1536 = 15.36äº¿æ¬¡è¿ç®—
- è€—æ—¶ï¼š5-10ç§’
```

**æ— æ³•æ¥å—ï¼**

### 4.3 å‘é‡æ•°æ®åº“çš„è§£å†³æ–¹æ¡ˆï¼šANNç®—æ³•

å‘é‡æ•°æ®åº“ä½¿ç”¨**è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ˆApproximate Nearest Neighbor, ANNï¼‰**ï¼š

```
ç²¾ç¡®æœç´¢ï¼ˆæš´åŠ›æ³•ï¼‰ï¼š
æŸ¥è¯¢ vs 100ä¸‡å‘é‡ â†’ è®¡ç®—100ä¸‡æ¬¡ â†’ 5-10ç§’ â†’ 100%å‡†ç¡®

ANNæœç´¢ï¼š
æŸ¥è¯¢ vs ç´¢å¼•ç»“æ„ â†’ å¿«é€Ÿæ’é™¤ â†’ åªè®¡ç®—å‡ åƒæ¬¡ â†’ 10-50æ¯«ç§’ â†’ 95%+å‡†ç¡®
```

**æƒè¡¡ï¼š** ç‰ºç‰²å°‘é‡å‡†ç¡®ç‡ï¼ˆ<5%ï¼‰ï¼Œæ¢å–å·¨å¤§æ€§èƒ½æå‡ï¼ˆ100å€+ï¼‰

---

## äº”ã€ANNç®—æ³•æ·±åº¦è§£æ

### 5.1 ANNç®—æ³•åˆ†ç±»

```
ANNç®—æ³•
â”œâ”€â”€ åŸºäºå›¾çš„ç®—æ³•
â”‚   â”œâ”€â”€ HNSWï¼ˆHierarchical Navigable Small Worldï¼‰
â”‚   â”œâ”€â”€ NSGï¼ˆNavigating Spreading-out Graphï¼‰
â”‚   â””â”€â”€ NSWï¼ˆNavigable Small Worldï¼‰
â”‚
â”œâ”€â”€ åŸºäºæ ‘/åˆ’åˆ†çš„ç®—æ³•
â”‚   â”œâ”€â”€ IVFï¼ˆInverted Fileï¼‰
â”‚   â”œâ”€â”€ IVF-PQ
â”‚   â””â”€â”€ Annoyï¼ˆApproximate Nearest Neighbors Oh Yeahï¼‰
â”‚
â””â”€â”€ åŸºäºé‡åŒ–çš„ç®—æ³•
    â”œâ”€â”€ PQï¼ˆProduct Quantizationï¼‰
    â”œâ”€â”€ OPQï¼ˆOptimized Product Quantizationï¼‰
    â””â”€â”€ SQï¼ˆScalar Quantizationï¼‰
```

### 5.2 HNSWç®—æ³•è¯¦è§£

HNSWï¼ˆHierarchical Navigable Small Worldï¼‰æ˜¯æœ€å—æ¬¢è¿çš„ANNç®—æ³•ä¹‹ä¸€ã€‚

#### æ ¸å¿ƒæ€æƒ³ï¼šåˆ†å±‚å›¾ç»“æ„

ç±»æ¯”ç°å®ä¸–ç•Œçš„é“è·¯ç½‘ç»œï¼š

```
é«˜é€Ÿå…¬è·¯ï¼ˆç¬¬3å±‚ï¼‰
    â†“ åŸå¸‚é“è·¯ï¼ˆç¬¬2å±‚ï¼‰
        â†“ è¡—é“ï¼ˆç¬¬1å±‚ï¼‰
            â†“ åº•å±‚æ•°æ®ï¼ˆç¬¬0å±‚ï¼‰
```

#### ç®—æ³•ç»“æ„

```
ç¬¬3å±‚ï¼š      â—â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â—       (é«˜é€Ÿå…¬è·¯ï¼ŒèŠ‚ç‚¹å°‘ï¼Œè·³è·ƒå¿«)
              \       / \       /
               \     /   \     /
ç¬¬2å±‚ï¼š        â—â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â—â”€â—       (åŸå¸‚é“è·¯ï¼ŒèŠ‚ç‚¹ä¸­ç­‰)
                / | \     / | \
               /  |  \   /  |  \
ç¬¬1å±‚ï¼š       â—â”€â”€â—â”€â—â”€â”€â—â”€â”€â—â”€â—â”€â”€â—â”€â”€â”€â”€â—   (è¡—é“ï¼ŒèŠ‚ç‚¹å¤šï¼Œæœç´¢ç»†)
              /|  |\ |\/|  |\ |\ |\
ç¬¬0å±‚ï¼š      â— â— â— â— â—â— â— â— â— â— â— â—   (åº•å±‚æ•°æ®ï¼Œæ‰€æœ‰å‘é‡)
```

#### æœç´¢è¿‡ç¨‹

```python
def hnsw_search(query_vector, top_k=5):
    # Step 1: ä»æœ€é«˜å±‚éšæœºèŠ‚ç‚¹å¼€å§‹
    current_node = random_node_at_layer(max_layer)

    # Step 2: é€å±‚å‘ä¸‹æœç´¢
    for layer in reversed(range(max_layer)):
        # åœ¨å½“å‰å±‚è´ªå©ªæœç´¢æœ€è¿‘é‚»
        current_node = greedy_search_at_layer(
            query_vector,
            current_node,
            layer
        )

    # Step 3: åœ¨åº•å±‚ï¼ˆç¬¬0å±‚ï¼‰ç²¾ç¡®æœç´¢
    results = detailed_search_at_layer_0(
        query_vector,
        current_node,
        ef=64  # æœç´¢èŒƒå›´å‚æ•°
    )

    # Step 4: è¿”å›Top-K
    return results[:top_k]
```

#### ä¸ºä»€ä¹ˆHNSWå¿«ï¼Ÿ

**æ—¶é—´å¤æ‚åº¦åˆ†æï¼š**

```
æš´åŠ›æœç´¢ï¼šO(n)  éœ€è¦æ£€æŸ¥æ‰€æœ‰nä¸ªå‘é‡

HNSWæœç´¢ï¼š
- ç¬¬3å±‚ï¼šO(log n)  é«˜é€Ÿè·³è·ƒåˆ°ç›®æ ‡åŒºåŸŸ
- ç¬¬2å±‚ï¼šO(log n)  åŒºåŸŸå¯¼èˆª
- ç¬¬1å±‚ï¼šO(log n)  ç²¾ç»†æœç´¢
- ç¬¬0å±‚ï¼šO(log n)  åº•å±‚ç²¾ç¡®æœç´¢

æ€»è®¡ï¼šO(log n)  â† è¿œå¿«äºO(n)
```

**å®é™…æ€§èƒ½ï¼š**

| æ•°æ®è§„æ¨¡ | æš´åŠ›æœç´¢ | HNSWæœç´¢ | åŠ é€Ÿæ¯” |
|---------|---------|---------|--------|
| 10ä¸‡ | 500ms | 5ms | 100x |
| 100ä¸‡ | 5s | 10ms | 500x |
| 1000ä¸‡ | 50s | 20ms | 2500x |
| 1äº¿ | 500s | 50ms | 10000x |

#### HNSWå‚æ•°è¯¦è§£

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ | å½±å“ |
|------|------|--------|------|
| **M** | æ¯ä¸ªèŠ‚ç‚¹çš„æœ€å¤§è¿æ¥æ•° | 16-32 | è¶Šå¤§â†’å‡†ç¡®ç‡é«˜ä½†å†…å­˜å¤§ |
| **efConstruction** | æ„å»ºç´¢å¼•æ—¶çš„æœç´¢å®½åº¦ | 200-400 | è¶Šå¤§â†’ç´¢å¼•è´¨é‡å¥½ä½†æ„å»ºæ…¢ |
| **ef** | æœç´¢æ—¶çš„æœç´¢å®½åº¦ | 64-256 | è¶Šå¤§â†’å‡†ç¡®ç‡é«˜ä½†æœç´¢æ…¢ |

**ç»éªŒè°ƒä¼˜ï¼š**

```python
# é«˜ç²¾åº¦ä¼˜å…ˆ
index_params = {
    "M": 32,
    "efConstruction": 400,
    "ef": 256
}

# å¹³è¡¡æ¨¡å¼ï¼ˆæ¨èï¼‰
index_params = {
    "M": 16,
    "efConstruction": 256,
    "ef": 128
}

# é€Ÿåº¦ä¼˜å…ˆ
index_params = {
    "M": 16,
    "efConstruction": 200,
    "ef": 64
}
```

### 5.3 IVFç®—æ³•è¯¦è§£

IVFï¼ˆInverted Fileï¼‰å€’æ’ç´¢å¼•ç®—æ³•ã€‚

#### æ ¸å¿ƒæ€æƒ³ï¼šèšç±»åˆ†åŒº

```
Step 1: èšç±»
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ‰€æœ‰å‘é‡ â†’ K-meansèšç±» â†’ 1024ä¸ªèšç±»ä¸­å¿ƒ

Step 2: åˆ†é…
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ¯ä¸ªå‘é‡åˆ†é…åˆ°æœ€è¿‘çš„èšç±»ä¸­å¿ƒ

Step 3: å€’æ’ç´¢å¼•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Cluster 1: [vec1, vec5, vec23, ...]
Cluster 2: [vec2, vec7, vec15, ...]
...

Step 4: æœç´¢
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æŸ¥è¯¢å‘é‡ â†’ æ‰¾æœ€è¿‘çš„nprobeä¸ªèšç±» â†’ åªåœ¨è¿™äº›èšç±»ä¸­æœç´¢
```

#### IVFå‚æ•°

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ | å½±å“ |
|------|------|--------|------|
| **nlist** | èšç±»æ•°é‡ | 1000-10000 | è¶Šå¤§â†’ç²¾åº¦è¶Šé«˜ä½†å†…å­˜è¶Šå¤§ |
| **nprobe** | æœç´¢æ—¶æ£€æŸ¥çš„èšç±»æ•° | 10-100 | è¶Šå¤§â†’å‡†ç¡®ç‡è¶Šé«˜ä½†è¶Šæ…¢ |

**æ€§èƒ½å¯¹æ¯”ï¼š**

| é…ç½® | å‡†ç¡®ç‡ | QPS | å†…å­˜ |
|------|--------|-----|------|
| nlist=1000, nprobe=10 | 85% | 10000 | ä¸­ |
| nlist=1000, nprobe=50 | 92% | 5000 | ä¸­ |
| nlist=10000, nprobe=100 | 95% | 3000 | é«˜ |

### 5.4 PQç®—æ³•è¯¦è§£

PQï¼ˆProduct Quantizationï¼‰ä¹˜ç§¯é‡åŒ–ç®—æ³•ï¼Œä¸»è¦ç”¨äº**å‹ç¼©å‘é‡**ä»¥å‡å°‘å†…å­˜å ç”¨ã€‚

#### æ ¸å¿ƒæ€æƒ³ï¼šåˆ†å—é‡åŒ–

```
åŸå§‹å‘é‡ï¼ˆ1536ç»´ï¼‰:
[0.23, -0.56, 0.78, 0.12, ..., 0.45]  (1536ä¸ªfloat32)

Step 1: åˆ†å—
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åˆ†æˆ 8 å—ï¼Œæ¯å— 192 ç»´

Step 2: é‡åŒ–
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ¯å—ç”¨ 8 bits è¡¨ç¤º â†’ å¯ä»¥è¡¨ç¤º 256 ä¸ªç æœ¬

Step 3: å‹ç¼©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åŸå§‹: 1536 Ã— 4 bytes = 6144 bytes
å‹ç¼©: 8 Ã— 1 byte = 8 bytes

å‹ç¼©æ¯”: 768x !!!
```

**ä¼˜ç¼ºç‚¹ï¼š**

| ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|
| å†…å­˜å ç”¨æä½ï¼ˆå‹ç¼©768å€ï¼‰ | å‡†ç¡®ç‡ä¸‹é™5-10% |
| æœç´¢é€Ÿåº¦å¿«ï¼ˆè·ç¦»æŸ¥è¡¨ï¼‰ | éœ€è¦è®­ç»ƒç æœ¬ |
| é€‚åˆå¤§è§„æ¨¡éƒ¨ç½² | ä¸é€‚åˆé«˜ç²¾åº¦åœºæ™¯ |

### 5.5 ç®—æ³•é€‰æ‹©æŒ‡å—

| åœºæ™¯ | æ¨èç®—æ³• | ç†ç”± |
|------|---------|------|
| **é€šç”¨åœºæ™¯** | HNSW | å‡†ç¡®ç‡å’Œé€Ÿåº¦å¹³è¡¡æœ€å¥½ |
| **è¶…å¤§æ•°æ®** | IVF+PQ | å†…å­˜å ç”¨ä½ï¼Œå¯æ‰©å±•æ€§å¼º |
| **é«˜ç²¾åº¦éœ€æ±‚** | HNSWï¼ˆé«˜efï¼‰ | å‡†ç¡®ç‡å¯è¾¾99%+ |
| **å®æ—¶æ›´æ–°** | IVF | æ”¯æŒå¢é‡æ›´æ–° |
| **å†…å­˜å—é™** | PQ | å†…å­˜å‹ç¼©æ¯”æœ€é«˜ |
| **ç®€å•åœºæ™¯** | Annoy | é™æ€æ•°æ®ï¼Œåªè¯»æŸ¥è¯¢ |

---

## å…­ã€ä¸»æµå‘é‡æ•°æ®åº“å¯¹æ¯”

### 6.1 äº§å“åˆ†ç±»

```
å‘é‡æ•°æ®åº“
â”œâ”€â”€ å¼€æºæ–¹æ¡ˆï¼ˆè‡ªå»ºéƒ¨ç½²ï¼‰
â”‚   â”œâ”€â”€ Milvusï¼ˆåŠŸèƒ½æœ€å…¨ï¼‰
â”‚   â”œâ”€â”€ Qdrantï¼ˆæ€§èƒ½æœ€å¥½ï¼‰
â”‚   â”œâ”€â”€ Weaviateï¼ˆæ˜“é›†æˆï¼‰
â”‚   â”œâ”€â”€ Chromaï¼ˆå­¦ä¹ ç¥å™¨ï¼‰
â”‚   â””â”€â”€ pgvectorï¼ˆPostgreSQLæ’ä»¶ï¼‰
â”‚
â””â”€â”€ å•†ä¸šæ–¹æ¡ˆï¼ˆæ‰˜ç®¡æœåŠ¡ï¼‰
    â”œâ”€â”€ Pineconeï¼ˆå¸‚åœºé¢†å¯¼è€…ï¼‰
    â”œâ”€â”€ Zilliz Cloudï¼ˆMilvuså•†ä¸šç‰ˆï¼‰
    â””â”€â”€ Weaviate Cloud
```

### 6.2 å¼€æºæ–¹æ¡ˆè¯¦ç»†å¯¹æ¯”

#### Milvus

**åŸºæœ¬ä¿¡æ¯ï¼š**
- å¼€æºåè®®ï¼šApache 2.0
- å¼€å‘å•†ï¼šZillizï¼ˆä¸­å›½ï¼‰
- GitHub Starsï¼š26k+
- é¦–æ¬¡å‘å¸ƒï¼š2019å¹´

**æ ¸å¿ƒç‰¹æ€§ï¼š**

| ç‰¹æ€§ | è¯´æ˜ | è¯„åˆ† |
|------|------|------|
| **æ€§èƒ½** | å•æœº10ä¸‡+ QPS | â­â­â­â­â­ |
| **æ‰©å±•æ€§** | æ°´å¹³æ‰©å±•ï¼Œæ”¯æŒç™¾äº¿çº§å‘é‡ | â­â­â­â­â­ |
| **ç´¢å¼•** | HNSWã€IVFã€PQç­‰10+ç§ | â­â­â­â­â­ |
| **æ˜“ç”¨æ€§** | Python/Java/Go/REST SDK | â­â­â­â­ |
| **ç”Ÿæ€** | Kubernetesã€Sparkã€Kafkaé›†æˆ | â­â­â­â­â­ |
| **æ–‡æ¡£** | ä¸­è‹±æ–‡é½å…¨ï¼Œè´¨é‡é«˜ | â­â­â­â­â­ |
| **ç¤¾åŒº** | æ´»è·ƒï¼Œ2.6ä¸‡+ GitHub Stars | â­â­â­â­â­ |

**æ¶æ„è®¾è®¡ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Milvusæ¶æ„                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¥å…¥å±‚ï¼šProxyï¼ˆè´Ÿè½½å‡è¡¡ï¼‰               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åè°ƒå±‚ï¼šRoot Coordinatorï¼ˆä»»åŠ¡è°ƒåº¦ï¼‰    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·¥ä½œèŠ‚ç‚¹ï¼š                             â”‚
â”‚  - Query Nodeï¼ˆæŸ¥è¯¢å¤„ç†ï¼‰                â”‚
â”‚  - Data Nodeï¼ˆæ•°æ®å†™å…¥ï¼‰                 â”‚
â”‚  - Index Nodeï¼ˆç´¢å¼•æ„å»ºï¼‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å­˜å‚¨å±‚ï¼š                               â”‚
â”‚  - etcdï¼ˆå…ƒæ•°æ®ï¼‰                        â”‚
â”‚  - MinIOï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰                     â”‚
â”‚  - Pulsarï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éƒ¨ç½²éš¾åº¦ï¼š**

| æ–¹å¼ | éš¾åº¦ | æ—¶é—´ | æ¨èåœºæ™¯ |
|------|------|------|---------|
| Docker Compose | â­â­ | 10åˆ†é’Ÿ | å­¦ä¹ ã€å°è§„æ¨¡ |
| Kubernetes | â­â­â­â­ | 1-2å°æ—¶ | ç”Ÿäº§ç¯å¢ƒ |
| Helm Chart | â­â­â­ | 30åˆ†é’Ÿ | ç”Ÿäº§ç¯å¢ƒ |

**é€‚ç”¨åœºæ™¯ï¼š**
- âœ… ä¼ä¸šçº§ç”Ÿäº§ç¯å¢ƒ
- âœ… éœ€è¦æ°´å¹³æ‰©å±•
- âœ… ç™¾ä¸‡åˆ°ç™¾äº¿çº§å‘é‡è§„æ¨¡
- âœ… éœ€è¦ä¸°å¯Œç´¢å¼•ç±»å‹
- âœ… ä¸­æ–‡æ–‡æ¡£éœ€æ±‚

#### Qdrant

**åŸºæœ¬ä¿¡æ¯ï¼š**
- å¼€æºåè®®ï¼šApache 2.0
- å¼€å‘å•†ï¼šQdrantï¼ˆå¾·å›½ï¼‰
- ç¼–ç¨‹è¯­è¨€ï¼šRust
- GitHub Starsï¼š18k+

**æ ¸å¿ƒç‰¹æ€§ï¼š**

| ç‰¹æ€§ | è¯´æ˜ | è¯„åˆ† |
|------|------|------|
| **æ€§èƒ½** | Rustç¼–å†™ï¼Œæ€§èƒ½æä½³ | â­â­â­â­â­ |
| **å†…å­˜æ•ˆç‡** | æ€§èƒ½/å†…å­˜æ¯”ä¼˜ç§€ | â­â­â­â­â­ |
| **è¿‡æ»¤æŸ¥è¯¢** | å¼ºå¤§çš„Filteræ”¯æŒ | â­â­â­â­â­ |
| **API** | REST + gRPC | â­â­â­â­â­ |
| **æ˜“éƒ¨ç½²** | å•Dockerå®¹å™¨ | â­â­â­â­â­ |
| **æ–‡æ¡£** | è‹±æ–‡ä¸ºä¸»ï¼Œè´¨é‡é«˜ | â­â­â­â­ |
| **ç¤¾åŒº** | æ´»è·ƒï¼Œ18k+ Stars | â­â­â­â­ |

**ç‹¬ç‰¹ä¼˜åŠ¿ï¼š**
- ğŸš€ Rustç¼–å†™ï¼Œæ€§èƒ½å’Œå†…å­˜ç®¡ç†ä¼˜å¼‚
- ğŸ¯ å¼ºå¤§çš„è¿‡æ»¤æŸ¥è¯¢èƒ½åŠ›
- ğŸ”§ æ˜“éƒ¨ç½²ï¼ˆå•å®¹å™¨ï¼‰
- ğŸ’¾ æ”¯æŒå†…å­˜å’Œç£ç›˜å­˜å‚¨

**é€‚ç”¨åœºæ™¯ï¼š**
- âœ… æ€§èƒ½æ•æ„Ÿåœºæ™¯
- âœ… éœ€è¦å¤æ‚è¿‡æ»¤æŸ¥è¯¢
- âœ… èµ„æºå—é™ç¯å¢ƒ
- âœ… å–œæ¬¢Rustç”Ÿæ€

#### Weaviate

**åŸºæœ¬ä¿¡æ¯ï¼š**
- å¼€æºåè®®ï¼šBSD 3-Clause
- å¼€å‘å•†ï¼šWeaviateï¼ˆè·å…°ï¼‰
- ç¼–ç¨‹è¯­è¨€ï¼šGo
- GitHub Starsï¼š10k+

**æ ¸å¿ƒç‰¹æ€§ï¼š**

| ç‰¹æ€§ | è¯´æ˜ | è¯„åˆ† |
|------|------|------|
| **GraphQL API** | GraphQLåŸç”Ÿæ”¯æŒ | â­â­â­â­â­ |
| **æ¨¡å—åŒ–** | å¯æ‰©å±•æ¨¡å—è®¾è®¡ | â­â­â­â­â­ |
| **å¤šæ¨¡æ€** | æ–‡æœ¬+å›¾åƒ+éŸ³é¢‘ | â­â­â­â­â­ |
| **ç”Ÿæ€é›†æˆ** | OpenAIã€Cohoreç­‰ | â­â­â­â­â­ |
| **æ–‡æ¡£** | è‹±æ–‡ï¼Œè´¨é‡å¾ˆé«˜ | â­â­â­â­â­ |
| **ç¤¾åŒº** | æ´»è·ƒï¼Œ10k+ Stars | â­â­â­â­ |

**ç‹¬ç‰¹ä¼˜åŠ¿ï¼š**
- ğŸ”Œ GraphQL APIå‹å¥½
- ğŸ§© æ¨¡å—åŒ–è®¾è®¡ï¼ˆVectorizerã€Rerankerç­‰ï¼‰
- ğŸ¨ å¤šæ¨¡æ€æ”¯æŒé¢†å…ˆ
- ğŸ”— ç¬¬ä¸‰æ–¹é›†æˆä¸°å¯Œ

**é€‚ç”¨åœºæ™¯ï¼š**
- âœ… éœ€è¦GraphQL API
- âœ… å¤šæ¨¡æ€åº”ç”¨
- âœ… å¿«é€Ÿé›†æˆç¬¬ä¸‰æ–¹æœåŠ¡

#### Chroma

**åŸºæœ¬ä¿¡æ¯ï¼š**
- å¼€æºåè®®ï¼šApache 2.0
- å¼€å‘å•†ï¼šChromaï¼ˆç¾å›½ï¼‰
- ç¼–ç¨‹è¯­è¨€ï¼šPython/Rust
- GitHub Starsï¼š9k+

**æ ¸å¿ƒç‰¹æ€§ï¼š**

| ç‰¹æ€§ | è¯´æ˜ | è¯„åˆ† |
|------|------|------|
| **æç®€è®¾è®¡** | 5åˆ†é’Ÿä¸Šæ‰‹ | â­â­â­â­â­ |
| **Python/JS** | åŒè¯­è¨€æ”¯æŒ | â­â­â­â­â­ |
| **çµæ´»å­˜å‚¨** | å†…å­˜æˆ–æŒä¹…åŒ– | â­â­â­â­ |
| **é›¶é…ç½®** | å¼€ç®±å³ç”¨ | â­â­â­â­â­ |
| **æ–‡æ¡£** | ç®€æ´æ¸…æ™° | â­â­â­â­ |
| **ç¤¾åŒº** | æ´»è·ƒï¼Œ9k+ Stars | â­â­â­ |

**ç‹¬ç‰¹ä¼˜åŠ¿ï¼š**
- ğŸ¯ æç®€è®¾è®¡ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“
- ğŸ’» Pythonå’ŒJavaScriptåŒSDK
- ğŸš€ å¿«é€ŸåŸå‹å¼€å‘
- ğŸ“š é€‚åˆå­¦ä¹ å’Œæ•™å­¦

**é€‚ç”¨åœºæ™¯ï¼š**
- âœ… å­¦ä¹ RAGå’Œå‘é‡æ£€ç´¢
- âœ… å¿«é€ŸåŸå‹éªŒè¯
- âœ… å°è§„æ¨¡åº”ç”¨
- âŒ ä¸æ¨èç”Ÿäº§ç¯å¢ƒ

#### pgvector

**åŸºæœ¬ä¿¡æ¯ï¼š**
- ç±»å‹ï¼šPostgreSQLæ‰©å±•
- å¼€å‘å•†ï¼šVectorbaseï¼ˆæ—¥æœ¬ï¼‰
- GitHub Starsï¼š7k+

**æ ¸å¿ƒç‰¹æ€§ï¼š**

| ç‰¹æ€§ | è¯´æ˜ | è¯„åˆ† |
|------|------|------|
| **é›†æˆæ€§** | PostgreSQLåŸç”Ÿæ’ä»¶ | â­â­â­â­â­ |
| **ACID** | äº‹åŠ¡æ”¯æŒ | â­â­â­â­â­ |
| **SQLå…¼å®¹** | æ··åˆSQLå’Œå‘é‡æŸ¥è¯¢ | â­â­â­â­â­ |
| **æ˜“éƒ¨ç½²** | å·²æœ‰PostgreSQLç›´æ¥ç”¨ | â­â­â­â­â­ |
| **æ€§èƒ½** | é€‚åˆä¸­å°è§„æ¨¡ | â­â­â­ |
| **ç´¢å¼•** | IVFã€HNSW | â­â­â­â­ |

**ç‹¬ç‰¹ä¼˜åŠ¿ï¼š**
- ğŸ˜ PostgreSQLåŸç”Ÿé›†æˆ
- ğŸ’³ ACIDäº‹åŠ¡æ”¯æŒ
- ğŸ“Š ç»“æ„åŒ–+å‘é‡æ··åˆæŸ¥è¯¢
- ğŸ”§ å¤ç”¨ç°æœ‰PostgreSQLè®¾æ–½

**é€‚ç”¨åœºæ™¯ï¼š**
- âœ… å·²æœ‰PostgreSQLåŸºç¡€è®¾æ–½
- âœ… éœ€è¦ACIDäº‹åŠ¡
- âœ… ä¸­å°è§„æ¨¡ï¼ˆ<1000ä¸‡å‘é‡ï¼‰
- âœ… éœ€è¦æ··åˆæŸ¥è¯¢

### 6.3 å•†ä¸šæ–¹æ¡ˆè¯¦ç»†å¯¹æ¯”

#### Pinecone

**åŸºæœ¬ä¿¡æ¯ï¼š**
- ç±»å‹ï¼šæ‰˜ç®¡æœåŠ¡
- å¼€å‘å•†ï¼šPineconeï¼ˆç¾å›½ï¼‰
- æˆç«‹ï¼š2019å¹´
- èèµ„ï¼š1.38äº¿ç¾å…ƒ

**å®šä»·ï¼š**

| æ–¹æ¡ˆ | ä»·æ ¼ | ç´¢å¼•æ•° | å‘é‡æ•° | é€‚ç”¨åœºæ™¯ |
|------|------|--------|--------|---------|
| **å…è´¹** | $0/æœˆ | 1ä¸ª | 10ä¸‡ | å­¦ä¹ æµ‹è¯• |
| **Starter** | $70/æœˆ | 5ä¸ª | 100ä¸‡ | å°è§„æ¨¡åº”ç”¨ |
| **Production** | $1000+/æœˆ | æ— é™ | 1000ä¸‡+ | ç”Ÿäº§ç¯å¢ƒ |

**æ ¸å¿ƒç‰¹æ€§ï¼š**

| ç‰¹æ€§ | è¯´æ˜ | è¯„åˆ† |
|------|------|------|
| **æ˜“ç”¨æ€§** | æ³¨å†Œå³ç”¨ï¼Œæ— éœ€è¿ç»´ | â­â­â­â­â­ |
| **æ€§èƒ½** | äº‘åŸç”Ÿï¼Œæ€§èƒ½ä¼˜ç§€ | â­â­â­â­â­ |
| **æ‰©å±•æ€§** | è‡ªåŠ¨æ‰©ç¼©å®¹ | â­â­â­â­â­ |
| **å®æ—¶æ›´æ–°** | ç§’çº§ç´¢å¼•æ›´æ–° | â­â­â­â­â­ |
| **æ··åˆæœç´¢** | å‘é‡+å…³é”®è¯ | â­â­â­â­ |
| **æ–‡æ¡£** | è‹±æ–‡ï¼Œè´¨é‡é«˜ | â­â­â­â­â­ |
| **æ”¯æŒ** | ä¼ä¸šæ”¯æŒ | â­â­â­â­â­ |

**ä¼˜ç¼ºç‚¹ï¼š**

| ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|------|
| âœ… é›¶è¿ç»´ï¼Œå¼€ç®±å³ç”¨ | âŒ ä»·æ ¼è¾ƒé«˜ |
| âœ… è‡ªåŠ¨æ‰©ç¼©å®¹ | âŒ ä¸æ”¯æŒè‡ªå»º |
| âœ… å®æ—¶ç´¢å¼•æ›´æ–° | âŒ å›½å†…è®¿é—®å¯èƒ½æ…¢ |
| âœ… ä¼ä¸šçº§SLA | âŒ ä¸­æ–‡æ–‡æ¡£å°‘ |

**é€‚ç”¨åœºæ™¯ï¼š**
- âœ… å¿«é€ŸéªŒè¯æƒ³æ³•
- âœ… ä¸æƒ³è¿ç»´åŸºç¡€è®¾æ–½
- âœ… é¢„ç®—å……è¶³ï¼ˆ$1000+/æœˆï¼‰
- âœ… éœ€è¦ä¼ä¸šçº§æ”¯æŒ
- âŒ æ•°æ®ä¸å‡ºå¢ƒè¦æ±‚

### 6.4 é€‰å‹å†³ç­–æ ‘

```
æ˜¯å¦éœ€è¦æ•°æ®ä¸å‡ºåŸŸ/è‡ªå»ºï¼Ÿ
â”œâ”€â”€ æ˜¯ â†’ å¼€æºæ–¹æ¡ˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ é¢„ç®—æœ‰é™/å°è§„æ¨¡/å­¦ä¹ 
â”‚   â”‚   â†’ Chromaï¼ˆæœ€ç®€å•ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ä¸­æ–‡æ–‡æ¡£/åŠŸèƒ½å…¨/ä¼ä¸šçº§
â”‚   â”‚   â†’ Milvusï¼ˆæ¨èï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ æ€§èƒ½æ•æ„Ÿ/å†…å­˜å—é™
â”‚   â”‚   â†’ Qdrant
â”‚   â”‚
â”‚   â”œâ”€â”€ å·²æœ‰PostgreSQL
â”‚   â”‚   â†’ pgvector
â”‚   â”‚
â”‚   â””â”€â”€ å¤šæ¨¡æ€/å¿«é€Ÿé›†æˆ
â”‚       â†’ Weaviate
â”‚
â””â”€â”€ å¦ â†’ å•†ä¸šæ–¹æ¡ˆ
    â”‚
    â”œâ”€â”€ å¿«é€ŸéªŒè¯/é¢„ç®—å……è¶³
    â”‚   â†’ Pinecone
    â”‚
    â””â”€â”€ é˜¿é‡Œäº‘/è…¾è®¯äº‘
        â†’ Zilliz Cloud
```

### 6.5 æ€§èƒ½åŸºå‡†æµ‹è¯•

**æµ‹è¯•ç¯å¢ƒï¼š**
- æ•°æ®é›†ï¼š1åƒä¸‡1536ç»´å‘é‡
- ç¡¬ä»¶ï¼š8æ ¸CPUï¼Œ32GBå†…å­˜
- æŒ‡æ ‡ï¼šRecall@10ï¼ˆå‡†ç¡®ç‡ï¼‰ã€QPSï¼ˆååé‡ï¼‰

**æµ‹è¯•ç»“æœï¼š**

| æ•°æ®åº“ | Recall@10 | QPS | å†…å­˜å ç”¨ | å»ºç´¢å¼•æ—¶é—´ |
|--------|-----------|-----|----------|-----------|
| **Milvus (HNSW)** | 96.5% | 8500 | 45GB | 2å°æ—¶ |
| **Qdrant (HNSW)** | 97.2% | 9200 | 38GB | 1.8å°æ—¶ |
| **Weaviate (HNSW)** | 95.8% | 7800 | 48GB | 2.2å°æ—¶ |
| **pgvector (IVF)** | 89.3% | 5200 | 52GB | 3.5å°æ—¶ |
| **Pinecone** | 96.8% | 8800 | N/A | N/A |

**ç»“è®ºï¼š**
- å‡†ç¡®ç‡ï¼šQdrant > Pinecone > Milvus > Weaviate > pgvector
- æ€§èƒ½ï¼šQdrant > Pinecone > Milvus > Weaviate > pgvector
- å†…å­˜ï¼šQdrantæœ€ä¼˜

---

## ä¸ƒã€å®æˆ˜éƒ¨ç½²æŒ‡å—

### 7.1 æ–¹æ¡ˆä¸€ï¼šChromaï¼ˆ5åˆ†é’Ÿä¸Šæ‰‹ï¼‰

#### å®‰è£…

```bash
pip install chromadb
```

#### å¿«é€Ÿå¼€å§‹

```python
import chromadb

# 1. åˆ›å»ºå®¢æˆ·ç«¯
client = chromadb.Client()

# 2. åˆ›å»ºé›†åˆ
collection = client.create_collection("demo")

# 3. æ·»åŠ æ–‡æ¡£
collection.add(
    documents=[
        "è‹¹æœæ˜¯ä¸€ç§çº¢è‰²çš„æ°´æœ",
        "é¦™è•‰æ˜¯é»„è‰²çš„çƒ­å¸¦æ°´æœ",
        "æ±½è½¦æœ‰å››ä¸ªè½®å­"
    ],
    ids=["doc1", "doc2", "doc3"]
)

# 4. æŸ¥è¯¢
results = collection.query(
    query_texts=["ä»€ä¹ˆæ°´æœæ˜¯çº¢è‰²çš„ï¼Ÿ"],
    n_results=1
)

# 5. è¾“å‡ºç»“æœ
print(results)
# {'documents': [['è‹¹æœæ˜¯ä¸€ç§çº¢è‰²çš„æ°´æœ']]}
```

#### æŒä¹…åŒ–å­˜å‚¨

```python
import chromadb
from chromadb.config import Settings

# æŒä¹…åŒ–åˆ°ç£ç›˜
client = chromadb.Client(Settings(
    chroma_db_impl="duckdb+parquet",
    persist_directory="./chroma_db"  # æ•°æ®ä¿å­˜ç›®å½•
))

# ä¹‹åæ“ä½œç›¸åŒ
collection = client.get_or_create_collection("demo")
```

**è¯„ä»·ï¼š**
- âœ… æœ€ç®€å•çš„å‘é‡åº“ï¼Œ5åˆ†é’Ÿä¸Šæ‰‹
- âœ… é€‚åˆå­¦ä¹ å’ŒåŸå‹å¼€å‘
- âŒ åŠŸèƒ½ç®€å•ï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒ

### 7.2 æ–¹æ¡ˆäºŒï¼šMilvusï¼ˆDockeréƒ¨ç½²ï¼‰

#### æ¶æ„è¯´æ˜

Milvus StandaloneåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         etcd                         â”‚
â”‚         (å…ƒæ•°æ®å­˜å‚¨)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         MinIO                        â”‚
â”‚         (å¯¹è±¡å­˜å‚¨)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Pulsar                       â”‚
â”‚         (æ¶ˆæ¯é˜Ÿåˆ—)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Milvus                       â”‚
â”‚         (å‘é‡å¼•æ“)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         Attu (å¯é€‰)                  â”‚
â”‚         (ç®¡ç†ç•Œé¢)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Docker Composeéƒ¨ç½²

**Step 1: ä¸‹è½½é…ç½®æ–‡ä»¶**

```bash
wget https://github.com/milvus-io/milvus/releases/download/v2.3.3/milvus-standalone-docker-compose.yml -O docker-compose.yml
```

**Step 2: å¯åŠ¨æœåŠ¡**

```bash
docker-compose up -d
```

**Step 3: æ£€æŸ¥çŠ¶æ€**

```bash
docker-compose ps
```

åº”è¯¥çœ‹åˆ°æ‰€æœ‰æœåŠ¡éƒ½æ˜¯`Up`çŠ¶æ€ã€‚

**Step 4: è®¿é—®ç®¡ç†ç•Œé¢ï¼ˆAttuï¼‰**

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000`

#### Pythonè¿æ¥ç¤ºä¾‹

```python
from pymilvus import connections, Collection, FieldSchema, CollectionSchema, DataType
import numpy as np

# 1. è¿æ¥Milvus
connections.connect(
    alias="default",
    host="localhost",
    port="19530"
)

# 2. å®šä¹‰Schema
fields = [
    FieldSchema(name="id", dtype=DataType.INT64, is_primary=True, auto_id=True),
    FieldSchema(name="embedding", dtype=DataType.FLOAT_VECTOR, dim=1536),
    FieldSchema(name="text", dtype=DataType.VARCHAR, max_length=65535)
]
schema = CollectionSchema(fields, "æˆ‘çš„ç¬¬ä¸€ä¸ªRAGé›†åˆ")

# 3. åˆ›å»ºCollection
collection = Collection("rag_demo", schema)

# 4. å‡†å¤‡æ•°æ®ï¼ˆä½¿ç”¨OpenAI Embeddingï¼‰
import openai

# ç”Ÿæˆå‘é‡
texts = ["æ–‡æ¡£1å†…å®¹", "æ–‡æ¡£2å†…å®¹", "æ–‡æ¡£3å†…å®¹"]
embeddings = []
for text in texts:
    response = openai.embeddings.create(
        model="text-embedding-3-small",
        input=text
    )
    embeddings.append(response.data[0].embedding)

# 5. æ’å…¥æ•°æ®
entities = [
    embeddings,  # embeddingå­—æ®µ
    texts        # textå­—æ®µ
]
collection.insert(entities)

# 6. åˆ›å»ºHNSWç´¢å¼•
index_params = {
    "index_type": "HNSW",
    "metric_type": "COSINE",
    "params": {
        "M": 16,
        "efConstruction": 256
    }
}
collection.create_index("embedding", index_params)

# 7. åŠ è½½åˆ°å†…å­˜
collection.load()

# 8. æœç´¢
query = "ç”¨æˆ·æŸ¥è¯¢"
response = openai.embeddings.create(
    model="text-embedding-3-small",
    input=query
)
query_vector = response.data[0].embedding

results = collection.search(
    data=[query_vector],
    anns_field="embedding",
    param={"metric_type": "COSINE", "params": {"ef": 64}},
    limit=5,
    output_fields=["text"]
)

# 9. è¾“å‡ºç»“æœ
for result in results[0]:
    print(f"ç›¸ä¼¼åº¦: {1 - result.distance:.4f}")
    print(f"æ–‡æ¡£: {result.entity.get('text')}")
    print("---")
```

#### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼ˆKubernetesï¼‰

**ä½¿ç”¨Helm Chartï¼š**

```bash
# æ·»åŠ Helmä»“åº“
helm repo add milvus https://milvus-io.github.io/milvus-helm/
helm repo update

# å®‰è£…Milvus
helm install my-milvus milvus/milvus --set cluster.enabled=true
```

**ç”Ÿäº§é…ç½®å»ºè®®ï¼š**

```yaml
# values.yaml
config:
  # èµ„æºé…ç½®
  resources:
    requests:
      cpu: 4
      memory: 16Gi
    limits:
      cpu: 8
      memory: 32Gi

  # å‰¯æœ¬æ•°
  replicas: 3

  # æŒä¹…åŒ–å­˜å‚¨
  persistence:
    enabled: true
    storageClass: "fast-ssd"
    size: 100Gi
```

### 7.3 æ–¹æ¡ˆä¸‰ï¼šQdrantï¼ˆå•å®¹å™¨éƒ¨ç½²ï¼‰

#### Dockerè¿è¡Œ

```bash
docker run -p 6333:6333 -p 6334:6334 \
    -v $(pwd)/qdrant_storage:/qdrant/storage:z \
    qdrant/qdrant
```

#### Pythonè¿æ¥

```python
from qdrant_client import QdrantClient
from qdrant_client.models import Distance, VectorParams, PointStruct

# 1. è¿æ¥
client = QdrantClient("http://localhost:6333")

# 2. åˆ›å»ºCollection
client.create_collection(
    collection_name="demo",
    vectors_config=VectorParams(size=1536, distance=Distance.COSINE)
)

# 3. æ’å…¥æ•°æ®
client.upsert(
    collection_name="demo",
    points=[
        PointStruct(id=1, vector=[0.1] * 1536, payload={"text": "æ–‡æ¡£1"}),
        PointStruct(id=2, vector=[0.2] * 1536, payload={"text": "æ–‡æ¡£2"}),
    ]
)

# 4. æœç´¢
results = client.search(
    collection_name="demo",
    query_vector=[0.15] * 1536,
    limit=5
)
```

### 7.4 éƒ¨ç½²æ£€æŸ¥æ¸…å•

**å¼€å‘ç¯å¢ƒï¼š**
- [ ] Docker/Podmanå·²å®‰è£…
- [ ] ç«¯å£19530ï¼ˆMilvusï¼‰æˆ–6333ï¼ˆQdrantï¼‰æœªè¢«å ç”¨
- [ ] å†…å­˜â‰¥8GB
- [ ] ç£ç›˜ç©ºé—´â‰¥50GB

**ç”Ÿäº§ç¯å¢ƒï¼š**
- [ ] Kubernetesé›†ç¾¤å·²éƒ¨ç½²
- [ ] æŒä¹…åŒ–å­˜å‚¨ï¼ˆSSDï¼‰å·²é…ç½®
- [ ] ç›‘æ§å‘Šè­¦ï¼ˆPrometheus+Grafanaï¼‰
- [ ] å¤‡ä»½ç­–ç•¥å·²åˆ¶å®š
- [ ] é«˜å¯ç”¨ï¼ˆå¤šå‰¯æœ¬ï¼‰å·²é…ç½®
- [ ] å®‰å…¨ç­–ç•¥ï¼ˆTLSã€è®¤è¯ï¼‰å·²å¯ç”¨

---

## å…«ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 8.1 ç´¢å¼•ä¼˜åŒ–

#### ç´¢å¼•é€‰æ‹©å†³ç­–

```
æ•°æ®è§„æ¨¡ï¼Ÿ
â”œâ”€â”€ å°ï¼ˆ<100ä¸‡ï¼‰
â”‚   â†’ HNSWï¼ˆM=16ï¼‰
â”‚
â”œâ”€â”€ ä¸­ï¼ˆ100ä¸‡-1000ä¸‡ï¼‰
â”‚   â†’ HNSWï¼ˆM=16-24ï¼‰
â”‚
â””â”€â”€ å¤§ï¼ˆ>1000ä¸‡ï¼‰
    â†’ IVF+PQ æˆ– HNSW+PQ
```

#### HNSWå‚æ•°è°ƒä¼˜

**é«˜ç²¾åº¦é…ç½®ï¼š**

```python
index_params = {
    "index_type": "HNSW",
    "metric_type": "COSINE",
    "params": {
        "M": 32,              # æ›´å¤šçš„è¿æ¥
        "efConstruction": 400 # æ›´ç²¾ç»†çš„æ„å»º
    }
}

search_params = {
    "metric_type": "COSINE",
    "params": {"ef": 256}     # æ›´å¤§çš„æœç´¢èŒƒå›´
}
```

**å¹³è¡¡é…ç½®ï¼ˆæ¨èï¼‰ï¼š**

```python
index_params = {
    "index_type": "HNSW",
    "metric_type": "COSINE",
    "params": {
        "M": 16,
        "efConstruction": 256
    }
}

search_params = {
    "metric_type": "COSINE",
    "params": {"ef": 128}
}
```

**é«˜æ€§èƒ½é…ç½®ï¼š**

```python
index_params = {
    "index_type": "HNSW",
    "metric_type": "COSINE",
    "params": {
        "M": 16,
        "efConstruction": 200
    }
}

search_params = {
    "metric_type": "COSINE",
    "params": {"ef": 64}
}
```

### 8.2 æŸ¥è¯¢ä¼˜åŒ–

#### æ‰¹é‡æŸ¥è¯¢

```python
# å·®ï¼šé€ä¸ªæŸ¥è¯¢
for query in queries:
    results = collection.search([query], ...)  # æ…¢

# å¥½ï¼šæ‰¹é‡æŸ¥è¯¢
results = collection.search(queries, ...)  # å¿«3-5å€
```

#### Top-Kè°ƒä¼˜

```python
# ä¸æ˜¯è¶Šå¤§è¶Šå¥½
K = 5    # æ¨èï¼š3-10
K = 20   # å¤ªå¤§ï¼Œå¢åŠ è®¡ç®—å’Œå™ªå£°
K = 100  # è¿‡å¤§ï¼Œæ€§èƒ½æ€¥å‰§ä¸‹é™
```

### 8.3 ç¼“å­˜ç­–ç•¥

#### Redisç¼“å­˜çƒ­ç‚¹æ•°æ®

```python
import redis

# 1. è¿æ¥Redis
redis_client = redis.Redis(host='localhost', port=6379)

# 2. æŸ¥è¯¢å‰å…ˆæŸ¥ç¼“å­˜
cache_key = f"query:{hash(query_vector)}"
cached_results = redis_client.get(cache_key)

if cached_results:
    results = json.loads(cached_results)
else:
    # ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢å‘é‡åº“
    results = collection.search([query_vector], ...)

    # å†™å…¥ç¼“å­˜ï¼ˆTTL=1å°æ—¶ï¼‰
    redis_client.setex(
        cache_key,
        3600,
        json.dumps(results)
    )
```

**ç¼“å­˜æ•ˆæœï¼š**

| åœºæ™¯ | æ— ç¼“å­˜ | æœ‰ç¼“å­˜ | æå‡ |
|------|--------|--------|------|
| çƒ­ç‚¹æŸ¥è¯¢ï¼ˆé‡å¤é—®é¢˜ï¼‰ | 50ms | 2ms | 25x |
| å†·æŸ¥è¯¢ | 50ms | 52ms | æŒå¹³ |

### 8.4 åˆ†ç‰‡ç­–ç•¥

#### æŒ‰æ—¶é—´åˆ†ç‰‡

```
Collectionè®¾è®¡ï¼š
- docs_2024_q1 (2024å¹´Q1æ•°æ®)
- docs_2024_q2 (2024å¹´Q2æ•°æ®)
- docs_2024_q3 (2024å¹´Q3æ•°æ®)
- docs_2024_q4 (2024å¹´Q4æ•°æ®)

æŸ¥è¯¢æ—¶ï¼šä¼˜å…ˆæŸ¥è¯¢æœ€æ–°åˆ†ç‰‡
```

#### æŒ‰ç±»åˆ«åˆ†ç‰‡

```
Collectionè®¾è®¡ï¼š
- tech_docs   (æŠ€æœ¯æ–‡æ¡£)
- legal_docs  (æ³•å¾‹æ–‡æ¡£)
- hr_docs     (äººäº‹æ–‡æ¡£)

æŸ¥è¯¢æ—¶ï¼šæ ¹æ®é—®é¢˜ç±»åˆ«é€‰æ‹©å¯¹åº”Collection
```

### 8.5 æ€§èƒ½åŸºå‡†

**ä¼˜åŒ–å‰ vs ä¼˜åŒ–åï¼š**

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| **æŸ¥è¯¢å»¶è¿Ÿ** | 150ms | 35ms | 4.3x |
| **ååé‡** | 2000 QPS | 8500 QPS | 4.25x |
| **å†…å­˜å ç”¨** | 100GB | 45GB | 2.2x |
| **å‡†ç¡®ç‡** | 88% | 95% | +7% |

**ä¼˜åŒ–æ¸…å•ï¼š**

| ä¼˜åŒ–é¡¹ | æ•ˆæœ | éš¾åº¦ | æ¨èåº¦ |
|--------|------|------|--------|
| HNSWå‚æ•°è°ƒä¼˜ | å‡†ç¡®ç‡+5-10% | â­â­ | â­â­â­â­â­ |
| æ‰¹é‡æŸ¥è¯¢ | ååé‡+3-5x | â­ | â­â­â­â­â­ |
| Redisç¼“å­˜ | çƒ­ç‚¹æŸ¥è¯¢å»¶è¿Ÿ-50% | â­â­â­ | â­â­â­â­ |
| PQå‹ç¼© | å†…å­˜å ç”¨-5x | â­â­â­â­ | â­â­â­â­ |
| åˆ†ç‰‡ç­–ç•¥ | æ‰©å±•æ€§æå‡ | â­â­â­â­ | â­â­â­ |

---

## ä¹ã€æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ

### 9.1 æŒ‘æˆ˜1ï¼šé«˜ç»´ç¾éš¾

**é—®é¢˜æè¿°ï¼š** ç»´åº¦è¶Šé«˜ï¼Œè®¡ç®—è¶Šæ…¢ï¼Œéœ€è¦çš„å­˜å‚¨ç©ºé—´è¶Šå¤§ã€‚

**æ•°æ®æ¼”ç¤ºï¼š**

```
ç»´æ•° vs æœç´¢è€—æ—¶ï¼ˆ100ä¸‡å‘é‡ï¼‰ï¼š

128ç»´  â†’ 5ms
256ç»´  â†’ 12ms
512ç»´  â†’ 35ms
1024ç»´ â†’ 85ms
1536ç»´ â†’ 180ms
3072ç»´ â†’ 450ms
```

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ–¹æ¡ˆ1ï¼šé™ç»´

```python
from sklearn.decomposition import PCA

# åŸå§‹å‘é‡ï¼š3072ç»´
vectors_3072d = load_vectors()

# é™ç»´åˆ°1024ç»´
pca = PCA(n_components=1024)
vectors_1024d = pca.fit_transform(vectors_3072d)

# æ•ˆæœï¼šä¿ç•™95%çš„æ–¹å·®ï¼Œé€Ÿåº¦æå‡3å€
```

#### æ–¹æ¡ˆ2ï¼šé€‰æ‹©åˆé€‚çš„ç»´åº¦

```python
# ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼

# OpenAI Embedding-3-small: 1536ç»´
# æ€§èƒ½ï¼š95.2%  é€Ÿåº¦ï¼š50ms

# OpenAI Embedding-3-large: 3072ç»´
# æ€§èƒ½ï¼š96.8%  é€Ÿåº¦ï¼š150ms

# ç»“è®ºï¼šlargeç‰ˆåªæå‡äº†1.6%å‡†ç¡®ç‡ï¼Œä½†é€Ÿåº¦æ…¢äº†3å€
```

### 9.2 æŒ‘æˆ˜2ï¼šå†…å­˜å ç”¨

**é—®é¢˜æè¿°ï¼š** ç´¢å¼•é€šå¸¸éœ€è¦å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ã€‚

**æ•°æ®ç¤ºä¾‹ï¼š**

```
1000ä¸‡ä¸ª1536ç»´å‘é‡ï¼ˆfloat32ï¼‰ï¼š
- å‘é‡æ•°æ®ï¼š10M Ã— 1536 Ã— 4 bytes = 57GB
- HNSWç´¢å¼•ï¼š20-40GB
- æ€»å†…å­˜éœ€æ±‚ï¼š80-100GB
```

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ–¹æ¡ˆ1ï¼šPQå‹ç¼©

```python
index_params = {
    "index_type": "IVF_PQ",
    "metric_type": "COSINE",
    "params": {
        "nlist": 1000,      # èšç±»æ•°
        "m": 64            # PQå› å­ï¼ˆå‹ç¼©æ¯”ï¼‰
    }
}

# æ•ˆæœï¼šå†…å­˜å ç”¨ä»100GBé™è‡³15GBï¼ˆå‹ç¼©6.7å€ï¼‰
#      å‡†ç¡®ç‡ä»95%é™è‡³88%
```

#### æ–¹æ¡ˆ2ï¼šç£ç›˜ANNï¼ˆDiskANNï¼‰

ä½¿ç”¨æ”¯æŒç£ç›˜ç´¢å¼•çš„å‘é‡åº“ï¼ˆå¦‚Qdrantï¼‰ï¼š

```python
# Qdrantæ”¯æŒHNSW on Disk
client = QdrantClient(
    path="./qdrant_storage",
    prefer_grpc=True
)
```

**æ•ˆæœï¼š**
- å†…å­˜å ç”¨ï¼š100GB â†’ 10GB
- æŸ¥è¯¢å»¶è¿Ÿï¼š50ms â†’ 120msï¼ˆå¯æ¥å—ï¼‰

### 9.3 æŒ‘æˆ˜3ï¼šå®æ—¶ç´¢å¼•æ›´æ–°

**é—®é¢˜æè¿°ï¼š** ä¼ ç»ŸANNç®—æ³•å¯¹å®æ—¶æ›´æ–°æ”¯æŒä¸å¥½ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ–¹æ¡ˆ1ï¼šMilvus 2.0+ å®æ—¶å†™å…¥

```python
# Milvus 2.0+ æ”¯æŒç§’çº§ç´¢å¼•æ›´æ–°
collection.insert(new_vectors)
# æ•°æ®ç«‹å³å¯è§ï¼ˆæ— éœ€æ‰‹åŠ¨flushï¼‰
```

#### æ–¹æ¡ˆ2ï¼šåˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         çƒ­æ•°æ®ï¼ˆRedisï¼‰               â”‚
â”‚         æœ€è¿‘1å°æ—¶æ•°æ®                 â”‚
â”‚         å®æ—¶æ›´æ–°                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         æ¸©æ•°æ®ï¼ˆMilvusï¼‰              â”‚
â”‚         æœ€è¿‘24å°æ—¶æ•°æ®                â”‚
â”‚         æ¯å°æ—¶åŒæ­¥                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         å†·æ•°æ®ï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰            â”‚
â”‚         å†å²æ•°æ®                      â”‚
â”‚         æŒ‰éœ€åŠ è½½                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.4 æŒ‘æˆ˜4ï¼šå‡†ç¡®ç‡vsé€Ÿåº¦æƒè¡¡

**æƒè¡¡è¡¨ï¼š**

| ç´¢å¼•ç±»å‹ | é€Ÿåº¦ | å‡†ç¡®ç‡ | å†…å­˜ | æ¨èåœºæ™¯ |
|---------|------|--------|------|---------|
| **HNSW** | å¿« | 95%+ | é«˜ | é€šç”¨ï¼ˆæ¨èï¼‰ |
| **IVF** | ä¸­ | 90%+ | ä¸­ | å¤§æ•°æ®é‡ |
| **PQ** | å¾ˆå¿« | 85%+ | ä½ | å†…å­˜å—é™ |
| **æš´åŠ›æœç´¢** | æ…¢ | 100% | - | ç²¾ç¡®æœç´¢ |

**è§£å†³æ–¹æ¡ˆï¼šä¸¤é˜¶æ®µæ£€ç´¢**

```python
# Stage 1: å¿«é€Ÿç²—æ’ï¼ˆIVFï¼‰
candidates = ivf_search(query_vector, top_k=100)

# Stage 2: ç²¾ç¡®ç²¾æ’ï¼ˆRerankï¼‰
final_results = rerank_model.rerank(query_vector, candidates, top_k=10)

# æ•ˆæœï¼šIVFçš„é€Ÿåº¦ + Rerankçš„å‡†ç¡®ç‡
```

---

## åã€æœªæ¥å‘å±•è¶‹åŠ¿

### 10.1 å‘å±•æ—¶é—´çº¿

```
2021
â””â”€â”€ ç‹¬ç«‹å‘é‡æ•°æ®åº“å…´èµ·ï¼ˆPineconeã€Milvusæˆç«‹ï¼‰

2022
â””â”€â”€ äº‘æ‰˜ç®¡æœåŠ¡æ™®åŠï¼Œé™ä½ä½¿ç”¨é—¨æ§›

2023
â”œâ”€â”€ ä¸ä¼ ç»Ÿæ•°æ®åº“èåˆï¼ˆpgvectorã€Redisearchï¼‰
â””â”€â”€ å¼€æºç”Ÿæ€æˆç†Ÿï¼ˆQdrantã€Weaviateï¼‰

2024
â”œâ”€â”€ ä¸“ä¸šåŒ–æ–¹å‘ï¼ˆå¤šæ¨¡æ€ã€æ—¶åºå‘é‡åº“ï¼‰
â””â”€â”€ AIåŸç”Ÿå‘é‡æ•°æ®åº“

2025+ï¼ˆé¢„æµ‹ï¼‰
â”œâ”€â”€ å¤šæ¨¡æ€åŸç”Ÿæ”¯æŒ
â”œâ”€â”€ è¾¹ç¼˜å‘é‡æ•°æ®åº“
â””â”€â”€ è‡ªé€‚åº”ç´¢å¼•ä¼˜åŒ–
```

### 10.2 æœªæ¥æ–¹å‘

#### æ–¹å‘1ï¼šå¤šæ¨¡æ€åŸç”Ÿ

**ç°çŠ¶ï¼š** å¤§éƒ¨åˆ†å‘é‡åº“åªæ”¯æŒæ–‡æœ¬
**æœªæ¥ï¼š** æ–‡æœ¬+å›¾åƒ+éŸ³é¢‘+è§†é¢‘è”åˆæ£€ç´¢

**æŠ€æœ¯ï¼š**
- CLIP-likeè”åˆåµŒå…¥
- ColPaliï¼ˆè§†è§‰æ–‡æ¡£æ£€ç´¢ï¼‰
- å¤šæ¨¡æ€å‘é‡ç©ºé—´ç»Ÿä¸€

#### æ–¹å‘2ï¼šå®æ—¶æ›´æ–°

**ç›®æ ‡ï¼š** æ¯«ç§’çº§ç´¢å¼•æ›´æ–°

**æŠ€æœ¯ï¼š**
- æµå¼ç´¢å¼•æ¶æ„
- å¢é‡HNSW
- LSM-treeæ€æƒ³åº”ç”¨åˆ°å‘é‡åº“

#### æ–¹å‘3ï¼šè¾¹ç¼˜éƒ¨ç½²

**éœ€æ±‚ï¼š** æ•°æ®ä¸å‡ºè®¾å¤‡

**æŠ€æœ¯ï¼š**
- è½»é‡çº§åµŒå…¥æ¨¡å‹ï¼ˆMobileBERTã€TinyBERTï¼‰
- æœ¬åœ°å‘é‡åº“ï¼ˆSQLite-VSSï¼‰
- è¾¹ç¼˜AIèŠ¯ç‰‡ï¼ˆNPUï¼‰ä¼˜åŒ–

#### æ–¹å‘4ï¼šAIåŸç”Ÿ

**è¶‹åŠ¿ï¼š** å‘é‡åº“ä¸å¤§æ¨¡å‹æ·±åº¦é›†æˆ

**ç‰¹æ€§ï¼š**
- è‡ªåŠ¨ç´¢å¼•ä¼˜åŒ–ï¼ˆAIé€‰æ‹©æœ€ä½³ç´¢å¼•ï¼‰
- æ™ºèƒ½å‚æ•°è°ƒä¼˜
- è‡ªé€‚åº”å‹ç¼©

---

## åä¸€ã€æ€»ç»“

### 11.1 æ ¸å¿ƒçŸ¥è¯†ç‚¹

1. **å‘é‡æœ¬è´¨**
   - å‘é‡ = ä¿¡æ¯çš„æ•°å­¦è¡¨ç¤º
   - AIé€šè¿‡åµŒå…¥æ¨¡å‹å°†æ–‡æœ¬è½¬åŒ–ä¸ºå‘é‡
   - å‘é‡è·ç¦» = è¯­ä¹‰ç›¸ä¼¼åº¦

2. **åµŒå…¥æ¨¡å‹æ¼”è¿›**
   - Word2Vecï¼ˆ2013ï¼‰â†’ BERTï¼ˆ2018ï¼‰â†’ BGEï¼ˆ2023ï¼‰â†’ OpenAI Embedding-3ï¼ˆ2024ï¼‰
   - ä¸­æ–‡åœºæ™¯ï¼šBGE-large-zh-v1.5æœ€å¼º
   - å¤šè¯­è¨€ï¼šOpenAI Embedding-3æœ€å¼º

3. **ç›¸ä¼¼åº¦è®¡ç®—**
   - ä½™å¼¦ç›¸ä¼¼åº¦ï¼šæ–‡æœ¬æ£€ç´¢é¦–é€‰ï¼ˆä¸å—é•¿åº¦å½±å“ï¼‰
   - æ¬§æ°è·ç¦»ï¼šå›¾åƒæ£€ç´¢åœºæ™¯
   - ç‚¹ç§¯ï¼šé«˜æ€§èƒ½åœºæ™¯ï¼ˆéœ€å½’ä¸€åŒ–ï¼‰

4. **å‘é‡æ•°æ®åº“ vs ä¼ ç»Ÿæ•°æ®åº“**
   - ä¼ ç»Ÿæ•°æ®åº“ï¼šç²¾ç¡®åŒ¹é…ï¼ŒB-Treeç´¢å¼•
   - å‘é‡æ•°æ®åº“ï¼šç›¸ä¼¼åº¦æœç´¢ï¼ŒANNç´¢å¼•
   - æ ¸å¿ƒåŒºåˆ«ï¼šæ•°æ®ç±»å‹å’ŒæŸ¥è¯¢æ–¹å¼

5. **ANNç®—æ³•**
   - HNSWï¼šé€šç”¨é¦–é€‰ï¼Œåˆ†å±‚å›¾ç»“æ„
   - IVFï¼šå¤§æ•°æ®é‡ï¼Œèšç±»åˆ†åŒº
   - PQï¼šå†…å­˜å‹ç¼©ï¼Œç‰ºç‰²å‡†ç¡®ç‡

6. **æŠ€æœ¯é€‰å‹**
   - å¼€æºï¼šMilvusï¼ˆåŠŸèƒ½å…¨ï¼‰ã€Qdrantï¼ˆæ€§èƒ½å¼ºï¼‰ã€Chromaï¼ˆå­¦ä¹ ï¼‰
   - å•†ä¸šï¼šPineconeï¼ˆæ˜“ç”¨ï¼‰ã€Zilliz Cloud
   - å·²æœ‰PostgreSQLï¼špgvector

7. **å®æˆ˜éƒ¨ç½²**
   - å­¦ä¹ /åŸå‹ï¼šChromaï¼ˆ5åˆ†é’Ÿï¼‰
   - ç”Ÿäº§ç¯å¢ƒï¼šMilvusï¼ˆDocker/K8sï¼‰
   - æ€§èƒ½æ•æ„Ÿï¼šQdrant

8. **æ€§èƒ½ä¼˜åŒ–**
   - ç´¢å¼•é€‰æ‹©ï¼šHNSWå‚æ•°è°ƒä¼˜
   - æŸ¥è¯¢ä¼˜åŒ–ï¼šæ‰¹é‡æŸ¥è¯¢
   - ç¼“å­˜ç­–ç•¥ï¼šRedisç¼“å­˜çƒ­ç‚¹æ•°æ®
   - åˆ†ç‰‡ç­–ç•¥ï¼šæŒ‰æ—¶é—´/ç±»åˆ«åˆ†ç‰‡

### 11.2 æŠ€æœ¯é€‰å‹é€ŸæŸ¥è¡¨

| éœ€æ±‚ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|------|---------|------|
| **å­¦ä¹ /åŸå‹** | Chroma | 5åˆ†é’Ÿä¸Šæ‰‹ |
| **ä¸­æ–‡ä¼ä¸šçº§** | Milvus | åŠŸèƒ½å…¨ï¼Œä¸­æ–‡æ–‡æ¡£ |
| **æ€§èƒ½ä¼˜å…ˆ** | Qdrant | Rustç¼–å†™ï¼Œæ€§èƒ½æä½³ |
| **ä¸æƒ³è¿ç»´** | Pinecone | æ‰˜ç®¡æœåŠ¡ |
| **å·²æœ‰PostgreSQL** | pgvector | å¤ç”¨è®¾æ–½ |
| **å¤šæ¨¡æ€åº”ç”¨** | Weaviate | å¤šæ¨¡æ€æ”¯æŒå¥½ |

### 11.3 æ€§èƒ½æŒ‡æ ‡å‚è€ƒ

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| **æŸ¥è¯¢å»¶è¿Ÿ** | <50ms | P95å»¶è¿Ÿ |
| **ååé‡** | >5000 QPS | å•å®ä¾‹ |
| **å‡†ç¡®ç‡** | >90% | Recall@10 |
| **å†…å­˜å ç”¨** | <å‘é‡æ•°æ®2å€ | å«ç´¢å¼• |
| **ç´¢å¼•æ›´æ–°** | <1åˆ†é’Ÿ | å®æ—¶æ€§è¦æ±‚ |

### 11.4 å­¦ä¹ è·¯å¾„

```
ç¬¬ä¸€é˜¶æ®µï¼šç†è§£å‘é‡åŸç†ï¼ˆæœ¬æ–‡ï¼‰
   â†“
ç¬¬äºŒé˜¶æ®µï¼šç†Ÿæ‚‰å‘é‡æ•°æ®åº“æ“ä½œ
   â†“
ç¬¬ä¸‰é˜¶æ®µï¼šå­¦ä¹ æ£€ç´¢ä¼˜åŒ–
   â†“
ç¬¬å››é˜¶æ®µï¼šæŒæ¡RerankæŠ€æœ¯
   â†“
ç¬¬äº”é˜¶æ®µï¼šç”Ÿäº§ç¯å¢ƒå®æˆ˜
```

### 11.5 ä¸‹æœŸé¢„å‘Š

**ã€Šæ–‡æœ¬åˆ‡åˆ†ä¸æ£€ç´¢ç­–ç•¥ã€‹** å°†æ·±å…¥è®²è§£ï¼š
- æ–‡æ¡£åˆ‡åˆ†çš„æ–¹æ³•å’Œç­–ç•¥
- å…ƒæ•°æ®è®¾è®¡æœ€ä½³å®è·µ
- æ£€ç´¢ç­–ç•¥æ¼”è¿›ï¼ˆä»ç®€å•åˆ°é«˜çº§ï¼‰
- Reranké‡æ’åºæŠ€æœ¯
- æ··åˆæ£€ç´¢ï¼ˆå‘é‡+å…³é”®è¯ï¼‰
- ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–æŠ€å·§

---

## å‚è€ƒèµ„æº

### è®ºæ–‡
- Efficient and Robust Approximate Nearest Neighbor Search Using Hierarchical Navigable Small World Graphs (Malkov, 2018)
- Product Quantization for Nearest Neighbor Search (Jegou, 2011)

### å¼€æºé¡¹ç›®
- Milvus: https://github.com/milvus-io/milvus
- Qdrant: https://github.com/qdrant/qdrant
- Chroma: https://github.com/chroma-core/chroma

### å­¦ä¹ èµ„æº
- Pinecone Learning Center
- Milvuså®˜æ–¹æ–‡æ¡£
- Vector Database Comparison: vector-db-Comparison.com

---

**ç‰ˆæƒå£°æ˜ï¼š** æœ¬æ–‡åŸåˆ›å†…å®¹ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

**ä½œè€…ï¼š** AIæŠ€æœ¯ç ”ç©¶å‘˜
**å‘å¸ƒæ—¶é—´ï¼š** 2025å¹´1æœˆ
**ç³»åˆ—ï¼š** RAGæ·±åº¦è§£æç³»åˆ— ç¬¬02æœŸ

---

> ğŸ’¡ **äº’åŠ¨æé—®ï¼š**
> - ä½ ç›®å‰ä½¿ç”¨å“ªä¸ªå‘é‡æ•°æ®åº“ï¼Ÿä½“éªŒå¦‚ä½•ï¼Ÿ
> - åœ¨å‘é‡æ•°æ®åº“éƒ¨ç½²ä¸­é‡åˆ°äº†ä»€ä¹ˆæŒ‘æˆ˜ï¼Ÿ
> - æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒå’Œé—®é¢˜ï¼
