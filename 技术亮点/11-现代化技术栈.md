# 11 - ç°ä»£åŒ–æŠ€æœ¯æ ˆ âš›ï¸

> **éš¾åº¦**: â­â­â­ | **ä»·å€¼**: ğŸ”¥ğŸ”¥ğŸ”¥ | **åˆ›æ–°åº¦**: â­â­â­

---

## ğŸ“Œ æŠ€æœ¯æ¦‚è¿°

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

æˆ‘ä»¬çš„å‰ç«¯é‡‡ç”¨**æœ€æ–°çš„ç°ä»£åŒ–æŠ€æœ¯æ ˆ**ï¼Œç¡®ä¿åº”ç”¨çš„æ€§èƒ½å’Œå¼€å‘ä½“éªŒï¼š

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| **React** | 19.2.0 | UIæ¡†æ¶ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰ |
| **TypeScript** | 5.9.3 | ç±»å‹å®‰å…¨ |
| **Vite** | 7.2.4 | æ„å»ºå·¥å…· |
| **Ant Design** | 6.1.3 | UIç»„ä»¶åº“ |
| **TanStack Query** | 5.90.16 | æ•°æ®ç¼“å­˜ |
| **Zustand** | 5.0.9 | çŠ¶æ€ç®¡ç† |
| **React Router** | 7.11.0 | è·¯ç”±ç®¡ç† |
| **ECharts** | 6.0.0 | æ•°æ®å¯è§†åŒ– |

### æŠ€æœ¯é€‰å‹äº®ç‚¹

```
å‰ç«¯æŠ€æœ¯æ ˆé€‰å‹åŸåˆ™ï¼š
â‘  æœ€æ–°ç¨³å®šç‰ˆæœ¬
â‘¡ ç¤¾åŒºæ´»è·ƒåº¦é«˜
â‘¢ æ€§èƒ½ä¼˜ç§€
â‘£ å¼€å‘ä½“éªŒå¥½
â‘¤ é€‚åˆä¸­å¤§å‹é¡¹ç›®
```

---

## ğŸ” æŠ€æœ¯åŸç†

### React 19 æ–°ç‰¹æ€§

```typescript
// React 19 æ”¯æŒæ–°çš„ç¼–è¯‘å™¨ä¼˜åŒ–
// è‡ªåŠ¨ä¼˜åŒ–ç»„ä»¶é‡æ¸²æŸ“
// æ›´å¥½çš„TypeScripté›†æˆ

function TouristChat() {
  // React 19 Hooks
  const [messages, setMessages] = useState([]);
  const [loading, setLoading] = useState(false);

  // è‡ªåŠ¨æ‰¹å¤„ç†ä¼˜åŒ–
  const handleSend = async (msg: string) => {
    setLoading(true);
    const response = await api.chat(msg);
    setMessages(prev => [...prev, response]);
    setLoading(false);
  };

  return <div>...</div>;
}
```

### Vite æ„å»ºä¼˜åŒ–

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [react()],
  optimizeDeps: {
    include: ['antd', 'echarts', 'react-router-dom']
  },
  build: {
    target: 'es2015',
    minify: 'terser',
    rollupOptions: {
      output: {
        manualChunks: {
          'react-vendor': ['react', 'react-dom', 'react-router-dom'],
          'antd': ['antd', '@ant-design/icons'],
          'echarts': ['echarts', 'echarts-for-react']
        }
      }
    }
  }
});
```

### TypeScript ç±»å‹å®‰å…¨

```typescript
// frontend/src/types/index.ts
export interface Attraction {
  id: string;
  name: string;
  city: string;
  description: string;
  rating: number;
  tags: string[];
  lat: number;
  lon: number;
  ticket_price: number;
  visitor_today?: number;
  weather?: {
    temperature: number;
    condition: string;
  };
}

export interface ChatMessage {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  suggestions?: string[];
  timestamp: Date;
}

export interface ApiResponse<T> {
  success: boolean;
  data: T;
  message: string;
  error?: {
    code: string;
    detail: string;
  };
  meta: {
    data_source: 'mock' | 'real';
    timestamp: string;
  };
}
```

---

## ğŸ’¡ é¡¹ç›®åº”ç”¨

### ä»£ç ä½ç½®

| æ–‡ä»¶ | ç”¨é€” |
|-----|------|
| [frontend/package.json](../../frontend/package.json) | ä¾èµ–é…ç½® |
| [frontend/vite.config.ts](../../frontend/vite.config.ts) | æ„å»ºé…ç½® |
| [frontend/tsconfig.json](../../frontend/tsconfig.json) | TypeScripté…ç½® |

### å®ç°ç»†èŠ‚

#### 1. é¡¹ç›®ä¾èµ–é…ç½®

```json
// frontend/package.json
{
  "name": "frontend",
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview",
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest --coverage"
  },
  "dependencies": {
    "@ant-design/icons": "^6.1.0",
    "@tanstack/react-query": "^5.90.16",
    "antd": "^6.1.3",
    "axios": "^1.13.2",
    "dayjs": "^1.11.19",
    "echarts": "^6.0.0",
    "echarts-for-react": "^3.0.5",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-router-dom": "^7.11.0",
    "zustand": "^5.0.9"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@testing-library/jest-dom": "^6.9.1",
    "@testing-library/react": "^16.3.1",
    "@vitejs/plugin-react": "^5.1.1",
    "@vitest/ui": "^4.0.16",
    "eslint": "^9.39.1",
    "typescript": "~5.9.3",
    "vite": "^7.2.4",
    "vitest": "^4.0.16"
  }
}
```

#### 2. TypeScript é…ç½®

```json
// frontend/tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

#### 3. Vite æ„å»ºé…ç½®

```typescript
// frontend/vite.config.ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': '/src'
    }
  },
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true
      }
    }
  },
  build: {
    target: 'es2015',
    outDir: 'dist',
    sourcemap: false,
    rollupOptions: {
      output: {
        manualChunks: {
          'react-vendor': ['react', 'react-dom', 'react-router-dom'],
          'antd': ['antd', '@ant-design/icons'],
          'echarts': ['echarts', 'echarts-for-react']
        }
      }
    }
  }
})
```

### æ ¸å¿ƒä»£ç ç¤ºä¾‹

```typescript
// frontend/src/main.tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import { ConfigProvider } from 'antd'
import zhCN from 'antd/locale/zh_CN'
import App from './App.tsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter>
      <ConfigProvider locale={zhCN}>
        <App />
      </ConfigProvider>
    </BrowserRouter>
  </React.StrictMode>,
)
```

---

## ğŸ¯ æ¼”ç¤ºè¯æœ¯

### å¼€åœºä»‹ç»ï¼ˆ30ç§’ï¼‰

```
"æˆ‘ä»¬çš„å‰ç«¯é‡‡ç”¨äº†æœ€æ–°çš„ç°ä»£åŒ–æŠ€æœ¯æ ˆã€‚

React 19æ˜¯æœ€æ–°çš„Reactç‰ˆæœ¬ï¼Œ
é…åˆTypeScriptã€Viteç­‰å·¥å…·ï¼Œ
ç¡®ä¿äº†åº”ç”¨çš„æ€§èƒ½å’Œå¼€å‘ä½“éªŒã€‚"
```

### æ·±åº¦è®²è§£ï¼ˆ2åˆ†é’Ÿï¼‰

```
"æŠ€æœ¯æ ˆé€‰å‹çš„æ ¸å¿ƒè€ƒè™‘ï¼š

ç¬¬ä¸€å±‚ï¼šæ¡†æ¶å’Œåº“
- React 19: æœ€æ–°ç‰ˆæœ¬ï¼Œæ€§èƒ½ä¼˜åŒ–
- TypeScript: ç±»å‹å®‰å…¨ï¼Œå‡å°‘bug
- Vite 7: æé€Ÿæ„å»ºï¼ŒHMR

ç¬¬äºŒå±‚ï¼šUIå’Œæ•°æ®
- Ant Design 6: ä¼ä¸šçº§UIç»„ä»¶
- ECharts 6: å¼ºå¤§çš„æ•°æ®å¯è§†åŒ–
- TanStack Query: æ™ºèƒ½æ•°æ®ç¼“å­˜
- Zustand: è½»é‡çº§çŠ¶æ€ç®¡ç†

ç¬¬ä¸‰å±‚ï¼šå¼€å‘å·¥å…·
- ESLint: ä»£ç è§„èŒƒæ£€æŸ¥
- Vitest: å¿«é€Ÿå•å…ƒæµ‹è¯•
- TypeScript 5.9: æœ€æ–°ç±»å‹ç³»ç»Ÿ

è¿™äº›æŠ€æœ¯éƒ½æ˜¯ç›®å‰ç¤¾åŒºæœ€æ´»è·ƒã€
æ€§èƒ½æœ€ä¼˜ã€å¼€å‘ä½“éªŒæœ€å¥½çš„é€‰æ‹©ã€‚

ä¾‹å¦‚ï¼ŒViteçš„å†·å¯åŠ¨æ—¶é—´åªéœ€å‡ åæ¯«ç§’ï¼Œ
HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰å‡ ä¹æ˜¯ç¬æ—¶çš„ã€‚

TanStack Queryå¯ä»¥è‡ªåŠ¨ç¼“å­˜APIè¯·æ±‚ï¼Œ
å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè°ƒç”¨ã€‚

è¿™å¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚"
```

### æ¼”ç¤ºäº’åŠ¨ï¼ˆ1åˆ†é’Ÿï¼‰

```
ï¼ˆå±•ç¤ºpackage.jsonå’Œvite.config.tsï¼‰

"å„ä½è¯„å§”è¯·çœ‹ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„package.jsonï¼š

Reactç‰ˆæœ¬æ˜¯19.2.0ï¼Œè¿™æ˜¯æœ€æ–°çš„Reactç‰ˆæœ¬ã€‚
Viteæ˜¯7.2.4ï¼Œä¹Ÿæ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚

æˆ‘ä»¬çš„ä¾èµ–éƒ½é€‰æ‹©äº†æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ã€‚

å†çœ‹vite.config.tsï¼Œ
æˆ‘ä»¬é…ç½®äº†ä»£ç åˆ†å‰²ï¼ˆmanualChunksï¼‰ï¼Œ
å°†Reactã€Ant Designã€EChartsåˆ†åˆ«æ‰“åŒ…ï¼Œ
è¿™æ ·å¯ä»¥åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ï¼Œ
æå‡äºŒæ¬¡åŠ è½½é€Ÿåº¦ã€‚

åŒæ—¶é…ç½®äº†ä»£ç†ï¼Œ
å¼€å‘æ—¶APIè¯·æ±‚è½¬å‘åˆ°åç«¯8000ç«¯å£ã€‚

è¿™äº›é…ç½®éƒ½ç»è¿‡ä¼˜åŒ–ï¼Œç¡®ä¿äº†æœ€ä½³æ€§èƒ½ã€‚"
```

### æ€»ç»“å¼ºè°ƒï¼ˆ30ç§’ï¼‰

```
"ç°ä»£åŒ–æŠ€æœ¯æ ˆçš„ä»·å€¼ï¼š

â‘  æ€§èƒ½ä¼˜ç§€ï¼šViteæ„å»ºï¼Œä»£ç åˆ†å‰²ä¼˜åŒ–
â‘¡ å¼€å‘ä½“éªŒï¼šHMRå¿«é€Ÿï¼Œç±»å‹å®‰å…¨
â‘¢ ç”Ÿæ€æˆç†Ÿï¼šç¤¾åŒºæ´»è·ƒï¼Œé—®é¢˜æ˜“è§£å†³
â‘£ å‰ç»æ€§ï¼šä½¿ç”¨æœ€æ–°æŠ€æœ¯ï¼Œä¾¿äºå‡çº§

è¿™ä½“ç°äº†æˆ‘ä»¬æŠ€æœ¯é€‰å‹çš„å‰ç»æ€§ï¼"
```

---

## ğŸ“Š å¯¹æ¯”ä¼˜åŠ¿

### ä¸ä¼ ç»ŸæŠ€æœ¯æ ˆå¯¹æ¯”

| ç»´åº¦ | ä¼ ç»ŸæŠ€æœ¯æ ˆ | ç°ä»£åŒ–æŠ€æœ¯æ ˆ |
|-----|----------|-------------|
| æ„å»ºå·¥å…· | Webpack (æ…¢) | Vite (å¿«10å€) |
| Reactç‰ˆæœ¬ | 16-18 (æ—§) | 19 (æœ€æ–°) |
| ç±»å‹å®‰å…¨ | JavaScript | TypeScript |
| çŠ¶æ€ç®¡ç† | Redux (å¤æ‚) | Zustand (ç®€å•) |
| æ•°æ®è·å– | æ‰‹åŠ¨ | TanStack Query |

### æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | ä¼ ç»Ÿæ–¹æ¡ˆ | æˆ‘ä»¬çš„æ–¹æ¡ˆ |
|-----|---------|----------|
| å†·å¯åŠ¨æ—¶é—´ | ~3ç§’ | ~0.1ç§’ |
| HMRé€Ÿåº¦ | ~1ç§’ | ~0.05ç§’ |
| ç”Ÿäº§æ„å»ºæ—¶é—´ | ~30ç§’ | ~10ç§’ |
| é¦–å±åŠ è½½æ—¶é—´ | ~2ç§’ | ~1ç§’ |

---

## ğŸš€ åº”ç”¨åœºæ™¯/æ‰©å±•æ€§

### åº”ç”¨åœºæ™¯

1. **å¼€å‘è°ƒè¯•**: Vite HMRï¼Œä¿®æ”¹å³æ—¶ç”Ÿæ•ˆ
2. **ç±»å‹æ£€æŸ¥**: TypeScriptç¼–è¯‘æ—¶æ£€æŸ¥
3. **ä»£ç è§„èŒƒ**: ESLintè‡ªåŠ¨æ£€æŸ¥
4. **å•å…ƒæµ‹è¯•**: Vitestå¿«é€Ÿæµ‹è¯•

### æ‰©å±•æ€§

å¯ä»¥è½»æ¾æ·»åŠ æ–°çš„å·¥å…·å’Œåº“ï¼š
- **Storybook**: ç»„ä»¶å¼€å‘å·¥å…·
- **Playwright**: E2Eæµ‹è¯•
- **PWA**: ç¦»çº¿æ”¯æŒ
- **i18n**: å›½é™…åŒ–

---

## ğŸ“ˆ ä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  React 19.2.0                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  React Router 7.11.0 (è·¯ç”±)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Zustand 5.0.9 (çŠ¶æ€ç®¡ç†)               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TanStack Query 5.90 (æ•°æ®ç¼“å­˜)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ant Design 6.1 â”‚  â”‚  ECharts 6.0    â”‚
â”‚  (UIç»„ä»¶åº“)      â”‚  â”‚  (æ•°æ®å¯è§†åŒ–)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ† æ€»ç»“

### æ ¸å¿ƒä»·å€¼

1. **æ€§èƒ½**: â­â­â­â­â­
   - Viteæ„å»ºï¼Œå¿«é€ŸHMR

2. **ç±»å‹å®‰å…¨**: â­â­â­â­â­
   - TypeScriptå…¨è¦†ç›–

3. **å¼€å‘ä½“éªŒ**: â­â­â­â­â­
   - æœ€æ–°å·¥å…·é“¾ï¼Œå¼€å‘æ•ˆç‡é«˜

### æ¼”ç¤ºå»ºè®®

- **æœ€ä½³å±•ç¤ºä½ç½®**: æŠ€æœ¯æ¶æ„è®²è§£
- **æ¼”ç¤ºæ—¶é•¿**: 1åˆ†é’Ÿ
- **å…³é”®è¯æœ¯**: "æœ€æ–°æŠ€æœ¯æ ˆï¼Œæ€§èƒ½æœ€ä¼˜"
- **è§†è§‰å†²å‡»**: ä¾èµ–ç‰ˆæœ¬å±•ç¤º

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2026-01-02
**ä½œè€…**: å±±è¥¿æ–‡æ—…æ™ºèƒ½ä½“å›¢é˜Ÿ
