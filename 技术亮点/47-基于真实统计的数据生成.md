# 47 - 基于真实统计的数据生成 📊

> **难度**: ⭐⭐⭐⭐ | **价值**: 🔥🔥🔥🔥 | **创新度**: ⭐⭐⭐⭐⭐ |

---

## 📌 技术概述

### 核心创新

我们的Mock数据不是完全随机，而是**基于真实数据统计**生成的：

| 统计维度 | 真实数据 | Mock数据 |
|---------|---------|----------|
| 总记录数 | 67,487条 | 基于此值 |
| 总用户数 | 5,003人 | 基于此值 |
| 男性比例 | 49.1% | 用于模拟 |
| 车主比例 | 62.8% | 用于模拟 |
| 日均记录 | 2,175条 | 基准值 |

### 技术成果

| 指标 | 数值 |
|-----|-----|
| 真实统计指标 | 11个 |
| 数据准确性 | ⭐⭐⭐⭐⭐ |
| 业务可信度 | 高 |

---

## 🔍 技术原理

### 真实数据统计

```python
# backend/app/services/mock_service.py:272-286
REAL_DATA_STATS = {
    "total_records": 67487,              # 总记录数
    "total_users": 5003,                 # 总用户数
    "gender_male_ratio": 0.491,          # 男性比例
    "gender_female_ratio": 0.462,        # 女性比例
    "area_city_ratio": 0.482,            # 城市区域比例
    "area_non_business_ratio": 0.342,    # 非商业区比例
    "area_rural_ratio": 0.077,           # 农村区域比例
    "car_owner_ratio": 0.628,            # 车主比例
    "base_daily_records": 2175,          # 日均记录数
    "unique_base_stations": 22115,       # 唯一基站数
    "unique_communities": 2313,          # 唯一小区数
    "date_range_days": 29                # 覆盖天数
}
```

### 统计驱动生成

```python
# 基于真实统计生成客户分析数据
async def get_customer_analytics(self, dimension: str = "all") -> dict:
    total = self.stats["total_users"]  # 5003

    return {
        "customer_sources": [
            {"region": "山西本地", "count": int(total * 0.35), "percentage": 35},
            {"region": "北京", "count": int(total * 0.18), "percentage": 18},
            {"region": "河北", "count": int(total * 0.12), "percentage": 12},
            # ...
        ],
        "summary": {
            "total_customers": total,
            "gender_male_ratio": round(self.stats["gender_male_ratio"] * 100, 1),
            "car_owner_ratio": round(self.stats["car_owner_ratio"] * 100, 1)
        }
    }
```

---

## 💡 项目应用

### 代码位置

**主文件**: [backend/app/services/mock_service.py:272-354](../../backend/app/services/mock_service.py#L272-L354)

### 实现细节

```python
# backend/app/services/mock_service.py:354-359
def _load_real_stats(self):
    """加载真实数据统计"""
    self.stats = REAL_DATA_STATS

# 使用真实统计作为基准
def get_dashboard_stats(self, time_range: str = "7d") -> dict:
    base_daily = self.stats["base_daily_records"]  # 2175
    total = base_daily * days
    # 基于真实基准生成数据
```

---

## 🎯 演示话术

### 开场介绍（30秒）

```
"我们的Mock数据不是凭空想象的，
而是基于67,487条真实信令数据的统计分析。

这确保了模拟数据的业务可信度，
虽然是Mock，但也是'真实'的。"
```

### 深度讲解（1分钟）

```
"真实数据统计驱动生成：

我们从真实数据中提取了11个关键统计：
- 总记录数：67,487条
- 总用户数：5,003人
- 性别比例：男性49.1%，女性46.2%
- 车主比例：62.8%
- 日均记录：2,175条
...

这些统计作为基准值，
生成各种分析数据。

例如，客户分析中的用户总数就是5,003，
客户来源分布基于真实的游客来源估算。

这样即使使用Mock数据，
也能反映真实的业务特征。"
```

---

## 📊 对比优势

| 维度 | 纯随机Mock | 真实统计Mock |
|-----|-----------|-------------|
| 业务可信度 | 低 | 高 |
| 数据合理性 | 差 | 优 |
| 演示效果 | 一般 | 优秀 |

---

## 🏆 总结

**核心价值**：Mock数据也是"真实"的，基于67,487条真实数据的统计分析。

**演示建议**：对比纯随机数据和真实统计数据的差异。

---

**文档版本**: v1.0
**最后更新**: 2026-01-02
**作者**: 山西文旅智能体团队
