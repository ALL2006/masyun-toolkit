# TimelineFlow Phase 1 - MVP 可实现功能清单

> **目标**: 1个月内完成可用的单机版时间线任务管理工具
> **原则**: 垫垫脚可以达成，不过度设计

---

## ✅ 一、核心功能（必须实现）

### 1.1 任务基础管理
**难度**: ⭐⭐
**预估工时**: 1 周

#### 功能列表
- [x] 创建任务（标题、描述、开始时间、结束时间）
- [x] 编辑任务（所有字段）
- [x] 删除任务
- [x] 任务列表展示

#### 数据模型
```typescript
interface Task {
  id: string                    // 唯一标识
  title: string                 // 任务标题
  description?: string          // 任务描述
  startTime: Date              // 开始时间
  endTime: Date                // 结束时间
  priority: 'urgent' | 'high' | 'medium' | 'low'  // 优先级
  status: 'todo' | 'in-progress' | 'done'  // 状态
  tags?: string[]              // 标签
  createdAt: Date              // 创建时间
  updatedAt: Date              // 更新时间
}
```

#### UI组件
- [ ] 任务创建弹窗/抽屉
- [ ] 任务编辑弹窗/抽屉
- [ ] 任务删除确认
- [ ] 基础表单验证

---

### 1.2 时间线视图（核心）
**难度**: ⭐⭐⭐
**预估工时**: 1.5 周

#### 功能列表
- [x] 周视图（默认）
- [x] 月视图
- [x] 时间轴渲染（日期刻度）
- [x] 任务条渲染（水平条形图）
- [x] 简单颜色编码（优先级）

#### 简化策略
```
❌ 不做智能重叠处理 → ✅ 使用垂直堆叠或"显示更多"
❌ 不做边缘拖拽调整时长 → ✅ 只支持整体拖拽移动
❌ 不做复杂依赖关系 → ✅ 暂时跳过
```

#### 技术选型
```
推荐: react-calendar-timeline
理由:
├── React原生集成
├── 开箱即用的周/月视图
├── 内置拖拽支持
└── 文档完善

备选: vis-timeline
├── 功能更强大
└── 但不是React原生，定制较难
```

#### 交互设计
- [ ] 点击空白处 → 创建任务
- [ ] 拖拽任务条 → 修改时间
- [ ] 点击任务条 → 编辑详情
- [ ] 悬浮任务条 → 显示简要信息

---

### 1.3 颜色编码系统
**难度**: ⭐
**预估工时**: 3 天

#### 优先级颜色方案
```typescript
const PRIORITY_COLORS = {
  urgent: '#FF4D4F',    // 红 - 紧急且重要
  high: '#FA8C16',      // 橙 - 重要不紧急
  medium: '#1890FF',    // 蓝 - 紧急不重要
  low: '#8C8C8C'        // 灰 - 不紧急不重要
};
```

#### 扩展（可选）
- [ ] 支持自定义颜色
- [ ] 支持标签颜色
- [ ] 支持项目颜色分类

---

### 1.4 数据持久化
**难度**: ⭐⭐
**预估工时**: 3 天

#### 存储方案
```typescript
// 使用 electron-store (Electron本地存储)
// 开发环境: LocalStorage / IndexedDB
// 生产环境: electron-store

interface StoreData {
  tasks: Task[]
  settings: UserSettings
}
```

#### 功能
- [ ] 自动保存（每次操作后）
- [ ] 数据加载（应用启动时）
- [ ] 数据备份（导出JSON）
- [ ] 数据恢复（导入JSON）

---

## 🎨 二、界面设计（简化版）

### 2.1 布局结构
```
┌─────────────────────────────────────────────────────────┐
│  TimelineFlow                                    🔔 ⚙️  │  顶部栏
├─────────────────────────────────────────────────────────┤
│  📅 2025年1月                              [<] [>]      │  时间导航
├─────────────────────────────────────────────────────────┤
│  日 一 二 三 四 五 六                                   │  日期头
│  ────┬───┬───┬───┬───┬───┬───                          │
│  │   │   │░░░│   │   │   │   │                         │
│  │   │   │░░░│   │███│   │   │                         │  任务条
│  │   │   │   │   │███│   │▓▓▓│                         │
│  │   │   │   │   │   │   │▓▓▓│                         │
└─────────────────────────────────────────────────────────┘

图例：
░░░ 高优先级任务 (红色)
███ 中优先级任务 (蓝色)
▓▓▓ 低优先级任务 (灰色)
```

### 2.2 必需页面
1. **主页面** - 时间线视图
2. **任务详情弹窗** - 编辑/创建任务
3. **设置页面** - 基础设置（可选）

### 2.3 UI风格
- 简洁现代（类似 Linear/Notion）
- 浅色主题（暂时不做深色模式）
- 响应式布局（最小宽度1200px）

---

## 🔧 三、技术栈（精简版）

### 核心依赖
```json
{
  "dependencies": {
    "react": "^19.2.3",
    "react-dom": "^19.2.3",
    "typescript": "^4.9.5",
    "react-calendar-timeline": "^0.28.0",  // 时间线核心库
    "dayjs": "^1.11.10",                    // 日期处理
    "electron-store": "^8.1.0",             // 本地存储
    "zustand": "^4.4.7"                     // 状态管理（可选）
  },
  "devDependencies": {
    "tailwindcss": "^3.4.0",                // 样式（可选）
    "@types/react-calendar-timeline": "^0.28.3"
  }
}
```

### 不需要的技术
```
❌ D3.js - 学习曲线陡，Phase 1不需要
❌ Redux - 单机版状态管理用Context API即可
❌ 后端API - 本地存储，暂不需要
❌ 数据库 - JSON文件 + electron-store
```

---

## 📅 四、开发计划（4周）

### Week 1: 基础架构
- [ ] 项目初始化
- [ ] 安装依赖（react-calendar-timeline, dayjs）
- [ ] 数据模型定义
- [ ] 状态管理搭建
- [ ] 基础路由（单页面可跳过）

### Week 2: 任务管理
- [ ] 创建任务UI
- [ ] 编辑任务UI
- [ ] 删除任务功能
- [ ] 任务列表展示
- [ ] 表单验证

### Week 3: 时间线视图
- [ ] 集成 react-calendar-timeline
- [ ] 周视图实现
- [ ] 月视图实现
- [ ] 拖拽交互
- [ ] 颜色编码

### Week 4: 完善与打磨
- [ ] 数据持久化
- [ ] 导入/导出功能
- [ ] Bug修复
- [ ] 性能优化
- [ ] 打包测试

---

## 🎯 五、MVP验收标准

### 功能完整性
- [ ] 可以创建/编辑/删除任务
- [ ] 可以在时间线上查看任务（周/月视图）
- [ ] 可以拖拽任务修改时间
- [ ] 任务按优先级显示不同颜色
- [ ] 关闭应用后数据不丢失

### 性能要求
- [ ] 100个任务流畅渲染
- [ ] 拖拽无明显延迟
- [ ] 应用启动时间 < 3秒

### 用户体验
- [ ] 界面简洁美观
- [ ] 操作直观易懂
- [ ] 有基本操作提示

---

## ⚠️ 六、不在Phase 1范围的功能

### 明确不做
```
❌ 智能重叠处理（简化为垂直堆叠）
❌ 任务依赖关系
❌ 流体调整（自动避让）
❌ 看板视图、日历视图
❌ 时间密度热力图
❌ 协作功能
❌ 云同步
❌ 任务模板
❌ 撤销/重做
❌ 键盘快捷键
❌ 深色模式
❌ 移动端适配
```

### Phase 2考虑
```
📋 看板视图
📋 列表视图
📋 任务筛选与搜索
📋 撤销/重做
📋 数据导入/导出
📋 云同步
```

---

## 💡 七、降低风险的策略

### 技术风险
| 风险 | 缓解措施 |
|------|---------|
| react-calendar-timeline 停止维护 | 确认功能满足需求，必要时Fork自维护 |
| 拖拽体验不佳 | 使用库内置拖拽，不自研 |
| 数据模型设计不当 | 保持简单，预留扩展性 |

### 时间风险
| 风险 | 缓解措施 |
|------|---------|
| 功能蔓延 | 严格按MVP范围，不临时加需求 |
| 学习曲线 | 使用熟悉的React生态 |
| Bug调试 | 预留1周缓冲时间 |

---

## 📊 八、成功指标

### Phase 1结束时
- ✅ 可独立运行的时间线任务管理工具
- ✅ 支持Web和EXE双版本
- ✅ 基础功能完整可用
- ✅ 代码结构清晰，易于扩展

### 下一步
基于用户反馈决定Phase 2方向：
- 如果需要多视图 → Phase 2: 看板+列表
- 如果需要协作 → Phase 2: 云同步
- 如果需要高级交互 → Phase 2: 拖拽增强

---

**总结**: Phase 1聚焦核心价值——"在时间线上直观地管理任务"，其他功能都是锦上添花。
